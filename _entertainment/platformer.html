---
layout: page
title: Flounder Chronicles
image: "/assets/img/logo.png"
---
<div>
<style>
  @import url(https://fonts.googleapis.com/css?family=Google+Sans+Text);

  html {
    font-family: 'Google Sans Text', 'Google Sans';
    font-size: 14px;
    color-scheme: light dark;
    background: light-dark(white, black);
    color: light-dark(black, white);
  }
</style>

<script
  type="importmap">{"imports":{"@modelcontextprotocol/sdk/":"https://esm.sh/@modelcontextprotocol/sdk/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/es2022/dist/esm/","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/client/index?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/client/index?target=es2022","https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/types?target=es2022":"https://esm.sh/@modelcontextprotocol/sdk@^1.11.0/dist/esm/types?target=es2022","react-dom/":"https://esm.sh/react-dom@^19.2.3/","react":"https://esm.sh/react@^19.2.3","react/":"https://esm.sh/react@^19.2.3/","lucide-react":"https://esm.sh/lucide-react@^0.562.0","@/index":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3ggfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7CmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20vY2xpZW50JzsKaW1wb3J0IEFwcCBmcm9tICdAL0FwcCc7CmNvbnN0IHJvb3RFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb3QnKTsKaWYgKCFyb290RWxlbWVudCkgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZmluZCByb290IGVsZW1lbnQgdG8gbW91bnQgdG8iKTsKfQpjb25zdCByb290ID0gUmVhY3RET00uY3JlYXRlUm9vdChyb290RWxlbWVudCk7CnJvb3QucmVuZGVyKF9qc3goUmVhY3QuU3RyaWN0TW9kZSwgeyBjaGlsZHJlbjogX2pzeChBcHAsIHt9KSB9KSk7Cg==","@/types":"data:application/javascript;base64,ZXhwb3J0IHZhciBFbnRpdHlUeXBlOwooZnVuY3Rpb24gKEVudGl0eVR5cGUpIHsKICAgIEVudGl0eVR5cGVbRW50aXR5VHlwZVsiUExBWUVSIl0gPSAwXSA9ICJQTEFZRVIiOwogICAgRW50aXR5VHlwZVtFbnRpdHlUeXBlWyJFTkVNWSJdID0gMV0gPSAiRU5FTVkiOwogICAgRW50aXR5VHlwZVtFbnRpdHlUeXBlWyJCT1NTIl0gPSAyXSA9ICJCT1NTIjsKICAgIEVudGl0eVR5cGVbRW50aXR5VHlwZVsiUFJPSkVDVElMRSJdID0gM10gPSAiUFJPSkVDVElMRSI7CiAgICBFbnRpdHlUeXBlW0VudGl0eVR5cGVbIlBBUlRJQ0xFIl0gPSA0XSA9ICJQQVJUSUNMRSI7CiAgICBFbnRpdHlUeXBlW0VudGl0eVR5cGVbIkNPTExFQ1RJQkxFIl0gPSA1XSA9ICJDT0xMRUNUSUJMRSI7Cn0pKEVudGl0eVR5cGUgfHwgKEVudGl0eVR5cGUgPSB7fSkpOwo=","@/constants":"data:application/javascript;base64,ZXhwb3J0IGNvbnN0IEdSQVZJVFkgPSAwLjY7CmV4cG9ydCBjb25zdCBGUklDVElPTiA9IDAuODU7CmV4cG9ydCBjb25zdCBNT1ZFX1NQRUVEID0gMC44OwpleHBvcnQgY29uc3QgTUFYX1NQRUVEID0gNjsKZXhwb3J0IGNvbnN0IEpVTVBfRk9SQ0UgPSAtMTQ7CmV4cG9ydCBjb25zdCBXQUxMX1NMSURFX1NQRUVEID0gMjsKZXhwb3J0IGNvbnN0IFdBTExfSlVNUF9GT1JDRSA9IHsgeDogOCwgeTogLTEyIH07CmV4cG9ydCBjb25zdCBCT1NTX0xFVkVMUyA9IFs2LCAxMl07CmV4cG9ydCBjb25zdCBUT1RBTF9MRVZFTFMgPSAxMjsKZXhwb3J0IGNvbnN0IEZMT1VOREVSX0xPR09fVVJMID0gJ2h0dHBzOi8vZmxvdW5kZXIubmV3cy9hc3NldHMvaW1nL2xvZ28ucG5nJzsKZXhwb3J0IGNvbnN0IFRIRU1FUyA9IHsKICAgIElORFVTVFJJQUw6IHsKICAgICAgICBuYW1lOiAnSW5kdXN0cmlhbCBEZWVwJywKICAgICAgICBiYWNrZ3JvdW5kVG9wOiAnIzAyMDYxNycsIC8vIFNsYXRlIDk1MAogICAgICAgIGJhY2tncm91bmRCb3R0b206ICcjMWUyOTNiJywgLy8gU2xhdGUgODAwCiAgICAgICAgcGxhdGZvcm1Db2xvcjogJyMwZjE3MmEnLCAvLyBTbGF0ZSA5MDAKICAgICAgICBwbGF0Zm9ybURldGFpbDogJyMzMzQxNTUnLCAvLyBTbGF0ZSA3MDAKICAgICAgICBhY2NlbnRDb2xvcjogJyMzOGJkZjgnLCAvLyBTa3kgQmx1ZQogICAgICAgIGhhemFyZENvbG9yOiAnI2VmNDQ0NCcsCiAgICB9LAogICAgTUFHTUE6IHsKICAgICAgICBuYW1lOiAnQ29yZSBGb3VuZHJ5JywKICAgICAgICBiYWNrZ3JvdW5kVG9wOiAnIzI3MDgwOCcsIC8vIERhcmsgUmVkCiAgICAgICAgYmFja2dyb3VuZEJvdHRvbTogJyM0NTBhMGEnLCAvLyBSZWQgOTAwCiAgICAgICAgcGxhdGZvcm1Db2xvcjogJyMxYTA1MDUnLAogICAgICAgIHBsYXRmb3JtRGV0YWlsOiAnIzdmMWQxZCcsIC8vIFJlZCA5MDAKICAgICAgICBhY2NlbnRDb2xvcjogJyNmNTllMGInLCAvLyBBbWJlcgogICAgICAgIGhhemFyZENvbG9yOiAnI2ZmMDAwMCcsCiAgICB9LAogICAgQ1lCRVI6IHsKICAgICAgICBuYW1lOiAnTmVvbiBEaXN0cmljdCcsCiAgICAgICAgYmFja2dyb3VuZFRvcDogJyMwZjA1MTgnLCAvLyBEYXJrIFB1cnBsZQogICAgICAgIGJhY2tncm91bmRCb3R0b206ICcjMmUxMDY1JywgLy8gVmlvbGV0IDkwMAogICAgICAgIHBsYXRmb3JtQ29sb3I6ICcjMTcwNjIxJywKICAgICAgICBwbGF0Zm9ybURldGFpbDogJyM0YzFkOTUnLAogICAgICAgIGFjY2VudENvbG9yOiAnI2Q4YjRmZScsIC8vIExhdmVuZGVyCiAgICAgICAgaGF6YXJkQ29sb3I6ICcjZDk0NmVmJywgLy8gRnVzY2hpYQogICAgfSwKICAgIFZPSUQ6IHsKICAgICAgICBuYW1lOiAnVGhlIEV0aGVyZWFsJywKICAgICAgICBiYWNrZ3JvdW5kVG9wOiAnIzAwMDAwMCcsCiAgICAgICAgYmFja2dyb3VuZEJvdHRvbTogJyMxNzE3MTcnLCAvLyBOZXV0cmFsIDkwMAogICAgICAgIHBsYXRmb3JtQ29sb3I6ICcjMDAwMDAwJywKICAgICAgICBwbGF0Zm9ybURldGFpbDogJyM0MDQwNDAnLAogICAgICAgIGFjY2VudENvbG9yOiAnI2ZmZmZmZicsCiAgICAgICAgaGF6YXJkQ29sb3I6ICcjZGMyNjI2JywKICAgIH0KfTsKZXhwb3J0IGNvbnN0IENPTE9SUyA9IHsKICAgIGJhY2tncm91bmQ6ICcjMGEwYTBlJywKICAgIGZvcmVncm91bmQ6ICcjMDAwMDAwJywKICAgIHBsYXllcjogJyNmZmZmZmYnLAogICAgYWNjZW50OiAnI2EzY2RmZicsCiAgICBkYW5nZXI6ICcjZmY0ZDRkJywKICAgIGdvbGQ6ICcjZmZkNzAwJywKICAgIGJvc3M6ICcjZmYyYTJhJywKICAgIHNoYWRvdzogJ3JnYmEoMCwwLDAsMC43KScsCiAgICBsaWdodDogJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKScKfTsK","@/utils/geometry":"data:application/javascript;base64,ZXhwb3J0IGNvbnN0IGNoZWNrQUFCQiA9IChyMSwgcjIpID0+IHsKICAgIHJldHVybiAocjEueCA8IHIyLnggKyByMi53ICYmCiAgICAgICAgcjEueCArIHIxLncgPiByMi54ICYmCiAgICAgICAgcjEueSA8IHIyLnkgKyByMi5oICYmCiAgICAgICAgcjEueSArIHIxLmggPiByMi55KTsKfTsKZXhwb3J0IGNvbnN0IHJlc29sdmVDb2xsaXNpb24gPSAoZW50aXR5LCBwbGF0Zm9ybSkgPT4gewogICAgLy8gQ2FsY3VsYXRlIGNlbnRlcnMgYW5kIGhhbGYtd2lkdGhzCiAgICBjb25zdCBlbnRpdHlIYWxmVyA9IGVudGl0eS53IC8gMjsKICAgIGNvbnN0IGVudGl0eUhhbGZIID0gZW50aXR5LmggLyAyOwogICAgY29uc3QgcGxhdEhhbGZXID0gcGxhdGZvcm0udyAvIDI7CiAgICBjb25zdCBwbGF0SGFsZkggPSBwbGF0Zm9ybS5oIC8gMjsKICAgIGNvbnN0IGVudGl0eUNlbnRlclggPSBlbnRpdHkueCArIGVudGl0eUhhbGZXOwogICAgY29uc3QgZW50aXR5Q2VudGVyWSA9IGVudGl0eS55ICsgZW50aXR5SGFsZkg7CiAgICBjb25zdCBwbGF0Q2VudGVyWCA9IHBsYXRmb3JtLnggKyBwbGF0SGFsZlc7CiAgICBjb25zdCBwbGF0Q2VudGVyWSA9IHBsYXRmb3JtLnkgKyBwbGF0SGFsZkg7CiAgICBjb25zdCBkeCA9IGVudGl0eUNlbnRlclggLSBwbGF0Q2VudGVyWDsKICAgIGNvbnN0IGR5ID0gZW50aXR5Q2VudGVyWSAtIHBsYXRDZW50ZXJZOwogICAgY29uc3QgbWluRGlzdFggPSBlbnRpdHlIYWxmVyArIHBsYXRIYWxmVzsKICAgIGNvbnN0IG1pbkRpc3RZID0gZW50aXR5SGFsZkggKyBwbGF0SGFsZkg7CiAgICBpZiAoTWF0aC5hYnMoZHgpIDwgbWluRGlzdFggJiYgTWF0aC5hYnMoZHkpIDwgbWluRGlzdFkpIHsKICAgICAgICBjb25zdCBvdmVybGFwWCA9IG1pbkRpc3RYIC0gTWF0aC5hYnMoZHgpOwogICAgICAgIGNvbnN0IG92ZXJsYXBZID0gbWluRGlzdFkgLSBNYXRoLmFicyhkeSk7CiAgICAgICAgLy8gUHJpb3JpdGl6ZSB2ZXJ0aWNhbCByZXNvbHV0aW9uIChsYW5kaW5nKSBpZiBvdmVybGFwWSBpcyBzbWFsbCBhbmQgd2UgYXJlIGZhbGxpbmcKICAgICAgICAvLyBUaGlzIGhlbHBzIHByZXZlbnQgZ2V0dGluZyBzdHVjayBvbiBzZWFtcyBiZXR3ZWVuIGZsb29yIHRpbGVzCiAgICAgICAgaWYgKG92ZXJsYXBZIDwgb3ZlcmxhcFggfHwgKGVudGl0eS52eSA+IDAgJiYgb3ZlcmxhcFkgPCAyMCkpIHsKICAgICAgICAgICAgaWYgKGR5ID4gMCkgewogICAgICAgICAgICAgICAgLy8gSGl0dGluZyBoZWFkIG9uIGJvdHRvbSBvZiBwbGF0Zm9ybQogICAgICAgICAgICAgICAgZW50aXR5LnkgKz0gb3ZlcmxhcFk7CiAgICAgICAgICAgICAgICBlbnRpdHkudnkgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gTGFuZGluZyBvbiB0b3AKICAgICAgICAgICAgICAgIGVudGl0eS55IC09IG92ZXJsYXBZOwogICAgICAgICAgICAgICAgZW50aXR5LnZ5ID0gMDsKICAgICAgICAgICAgICAgIGVudGl0eS5pc0dyb3VuZGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgLy8gSG9yaXpvbnRhbCBjb2xsaXNpb24KICAgICAgICAgICAgaWYgKGR4ID4gMCkgewogICAgICAgICAgICAgICAgZW50aXR5LnggKz0gb3ZlcmxhcFg7CiAgICAgICAgICAgICAgICBlbnRpdHkudnggPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgZW50aXR5LnggLT0gb3ZlcmxhcFg7CiAgICAgICAgICAgICAgICBlbnRpdHkudnggPSAwOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9OwpleHBvcnQgY29uc3QgZGlzdGFuY2UgPSAodjEsIHYyKSA9PiB7CiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHYyLnggLSB2MS54LCAyKSArIE1hdGgucG93KHYyLnkgLSB2MS55LCAyKSk7Cn07CmV4cG9ydCBjb25zdCBnZXRJbnRlcnNlY3Rpb24gPSAocmF5LCBzZWdtZW50KSA9PiB7CiAgICBjb25zdCByX3B4ID0gcmF5LmEueDsKICAgIGNvbnN0IHJfcHkgPSByYXkuYS55OwogICAgY29uc3Qgcl9keCA9IHJheS5iLnggLSByYXkuYS54OwogICAgY29uc3Qgcl9keSA9IHJheS5iLnkgLSByYXkuYS55OwogICAgY29uc3Qgc19weCA9IHNlZ21lbnQuYS54OwogICAgY29uc3Qgc19weSA9IHNlZ21lbnQuYS55OwogICAgY29uc3Qgc19keCA9IHNlZ21lbnQuYi54IC0gc2VnbWVudC5hLng7CiAgICBjb25zdCBzX2R5ID0gc2VnbWVudC5iLnkgLSBzZWdtZW50LmEueTsKICAgIGNvbnN0IHJfbWFnID0gTWF0aC5zcXJ0KHJfZHggKiByX2R4ICsgcl9keSAqIHJfZHkpOwogICAgY29uc3Qgc19tYWcgPSBNYXRoLnNxcnQoc19keCAqIHNfZHggKyBzX2R5ICogc19keSk7CiAgICBpZiAocl9keCAvIHJfbWFnID09PSBzX2R4IC8gc19tYWcgJiYgcl9keSAvIHJfbWFnID09PSBzX2R5IC8gc19tYWcpIHsKICAgICAgICByZXR1cm4gbnVsbDsgLy8gUGFyYWxsZWwKICAgIH0KICAgIGNvbnN0IFQyID0gKHJfZHggKiAoc19weSAtIHJfcHkpICsgcl9keSAqIChyX3B4IC0gc19weCkpIC8gKHNfZHggKiByX2R5IC0gc19keSAqIHJfZHgpOwogICAgY29uc3QgVDEgPSAoc19weCArIHNfZHggKiBUMiAtIHJfcHgpIC8gcl9keDsKICAgIGlmIChUMSA8IDApCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICBpZiAoVDIgPCAwIHx8IFQyID4gMSkKICAgICAgICByZXR1cm4gbnVsbDsKICAgIHJldHVybiB7CiAgICAgICAgeDogcl9weCArIHJfZHggKiBUMSwKICAgICAgICB5OiByX3B5ICsgcl9keSAqIFQxCiAgICB9Owp9Owo=","@/services/LevelGenerator":"data:application/javascript;base64,aW1wb3J0IHsgRW50aXR5VHlwZSB9IGZyb20gJ0AvdHlwZXMnOwppbXBvcnQgeyBCT1NTX0xFVkVMUywgVEhFTUVTIH0gZnJvbSAnQC9jb25zdGFudHMnOwovLyBEZXRlcm1pbmlzdGljIFJhbmRvbSBOdW1iZXIgR2VuZXJhdG9yCmNsYXNzIFNlZWRlZFJhbmRvbSB7CiAgICBjb25zdHJ1Y3RvcihzZWVkKSB7CiAgICAgICAgdGhpcy5zZWVkID0gc2VlZDsKICAgIH0KICAgIC8vIFJldHVybnMgMCB0byAxCiAgICBuZXh0KCkgewogICAgICAgIGNvbnN0IHggPSBNYXRoLnNpbih0aGlzLnNlZWQrKykgKiAxMDAwMDsKICAgICAgICByZXR1cm4geCAtIE1hdGguZmxvb3IoeCk7CiAgICB9CiAgICAvLyBSZXR1cm5zIHJhbmdlIFttaW4sIG1heCkKICAgIHJhbmdlKG1pbiwgbWF4KSB7CiAgICAgICAgcmV0dXJuIG1pbiArIHRoaXMubmV4dCgpICogKG1heCAtIG1pbik7CiAgICB9CiAgICAvLyBSZXR1cm5zIHRydWUvZmFsc2UgYmFzZWQgb24gcHJvYmFiaWxpdHkKICAgIGJvb2woY2hhbmNlID0gMC41KSB7CiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCgpIDwgY2hhbmNlOwogICAgfQp9CmNvbnN0IGdldFRoZW1lRm9yTGV2ZWwgPSAobGV2ZWxJbmRleCkgPT4gewogICAgaWYgKGxldmVsSW5kZXggPD0gMykKICAgICAgICByZXR1cm4gVEhFTUVTLklORFVTVFJJQUw7CiAgICBpZiAobGV2ZWxJbmRleCA8PSA2KQogICAgICAgIHJldHVybiBUSEVNRVMuTUFHTUE7CiAgICBpZiAobGV2ZWxJbmRleCA8PSA5KQogICAgICAgIHJldHVybiBUSEVNRVMuQ1lCRVI7CiAgICByZXR1cm4gVEhFTUVTLlZPSUQ7Cn07CmV4cG9ydCBjb25zdCBnZW5lcmF0ZUxldmVsID0gKGxldmVsSW5kZXgpID0+IHsKICAgIGNvbnN0IGlzQm9zcyA9IEJPU1NfTEVWRUxTLmluY2x1ZGVzKGxldmVsSW5kZXgpOwogICAgLy8gTG9uZ2VyIGxldmVsczogQmFzZSA0MDAwICsgc2NhbGluZwogICAgY29uc3Qgd2lkdGggPSBpc0Jvc3MgPyAyMDAwIDogNDAwMCArIChsZXZlbEluZGV4ICogNjAwKTsKICAgIGNvbnN0IGhlaWdodCA9IDE0MDA7IC8vIFRhbGxlciBmb3IgbW9yZSB2ZXJ0aWNhbGl0eQogICAgY29uc3QgdGhlbWUgPSBnZXRUaGVtZUZvckxldmVsKGxldmVsSW5kZXgpOwogICAgLy8gSW5pdGlhbGl6ZSBzZWVkZWQgcmFuZG9tIGZvciB0aGlzIHNwZWNpZmljIGxldmVsCiAgICBjb25zdCBybmcgPSBuZXcgU2VlZGVkUmFuZG9tKGxldmVsSW5kZXggKiAxMjM0NSk7CiAgICBjb25zdCBwbGF0Zm9ybXMgPSBbXTsKICAgIGNvbnN0IGVuZW1pZXMgPSBbXTsKICAgIGNvbnN0IGNvbGxlY3RpYmxlcyA9IFtdOwogICAgY29uc3QgcHJvamVjdGlsZXMgPSBbXTsKICAgIGxldCBib3NzOwogICAgLy8gLS0tIEJvdW5kYXJpZXMgLS0tCiAgICBwbGF0Zm9ybXMucHVzaCh7IHg6IC0yMDAsIHk6IC0yMDAwLCB3OiAyMDAsIGg6IDQwMDAsIHR5cGU6ICdzb2xpZCcsIHJlbmRlclR5cGU6ICdpbnZpc2libGUnIH0pOwogICAgcGxhdGZvcm1zLnB1c2goeyB4OiB3aWR0aCwgeTogLTIwMDAsIHc6IDIwMCwgaDogNDAwMCwgdHlwZTogJ3NvbGlkJywgcmVuZGVyVHlwZTogJ3dhbGwnIH0pOwogICAgLy8gLS0tIExldmVsIEFyY2hpdGVjdHVyZSAtLS0KICAgIGNvbnN0IGdyb3VuZFkgPSBoZWlnaHQgLSAxNTA7CiAgICBpZiAoaXNCb3NzKSB7CiAgICAgICAgLy8gQXJlbmEgRmxvb3IKICAgICAgICBwbGF0Zm9ybXMucHVzaCh7IHg6IDAsIHk6IGdyb3VuZFksIHc6IHdpZHRoLCBoOiA1MDAsIHR5cGU6ICdzb2xpZCcsIHJlbmRlclR5cGU6ICdncm91bmQnIH0pOwogICAgICAgIC8vIEJvc3MgUGxhdGZvcm1zCiAgICAgICAgcGxhdGZvcm1zLnB1c2goeyB4OiAyMDAsIHk6IGhlaWdodCAtIDQwMCwgdzogMzAwLCBoOiAzMCwgdHlwZTogJ3NvbGlkJywgcmVuZGVyVHlwZTogJ3BsYXRmb3JtJyB9KTsKICAgICAgICBwbGF0Zm9ybXMucHVzaCh7IHg6IHdpZHRoIC0gNTAwLCB5OiBoZWlnaHQgLSA0MDAsIHc6IDMwMCwgaDogMzAsIHR5cGU6ICdzb2xpZCcsIHJlbmRlclR5cGU6ICdwbGF0Zm9ybScgfSk7CiAgICAgICAgcGxhdGZvcm1zLnB1c2goeyB4OiB3aWR0aCAvIDIgLSAxNTAsIHk6IGhlaWdodCAtIDYwMCwgdzogMzAwLCBoOiAzMCwgdHlwZTogJ3NvbGlkJywgcmVuZGVyVHlwZTogJ3BsYXRmb3JtJyB9KTsKICAgICAgICBib3NzID0gewogICAgICAgICAgICBpZDogYGJvc3MtJHtsZXZlbEluZGV4fWAsCiAgICAgICAgICAgIHR5cGU6IEVudGl0eVR5cGUuQk9TUywKICAgICAgICAgICAgeDogd2lkdGggLSA0MDAsCiAgICAgICAgICAgIHk6IGhlaWdodCAtIDMwMCwKICAgICAgICAgICAgdzogMTgwLAogICAgICAgICAgICBoOiAxODAsCiAgICAgICAgICAgIHZ4OiAwLAogICAgICAgICAgICB2eTogMCwKICAgICAgICAgICAgY29sb3I6IHRoZW1lLmhhemFyZENvbG9yLAogICAgICAgICAgICBoZWFsdGg6IDQwICsgKGxldmVsSW5kZXggKiAxMCksCiAgICAgICAgICAgIG1heEhlYWx0aDogNDAgKyAobGV2ZWxJbmRleCAqIDEwKSwKICAgICAgICAgICAgaXNHcm91bmRlZDogZmFsc2UsCiAgICAgICAgICAgIGZhY2luZ1JpZ2h0OiBmYWxzZSwKICAgICAgICAgICAgc3RhdGU6ICdpZGxlJywKICAgICAgICAgICAgZnJhbWVUaW1lcjogMCwKICAgICAgICAgICAganVtcENvdW50OiAwLAogICAgICAgICAgICBpbnZpbmNpYmxlVGltZXI6IDAKICAgICAgICB9OwogICAgfQogICAgZWxzZSB7CiAgICAgICAgLy8gUHJvY2VkdXJhbCAoRGV0ZXJtaW5pc3RpYykgR2VuZXJhdGlvbgogICAgICAgIGxldCBjeCA9IDA7CiAgICAgICAgLy8gMS4gU2FmZSBTdGFydCBab25lCiAgICAgICAgcGxhdGZvcm1zLnB1c2goeyB4OiBjeCwgeTogZ3JvdW5kWSwgdzogODAwLCBoOiA1MDAsIHR5cGU6ICdzb2xpZCcsIHJlbmRlclR5cGU6ICdncm91bmQnIH0pOwogICAgICAgIGN4ICs9IDgwMDsKICAgICAgICB3aGlsZSAoY3ggPCB3aWR0aCAtIDgwMCkgewogICAgICAgICAgICBjb25zdCBzZWN0aW9uVHlwZSA9IHJuZy5yYW5nZSgwLCAxMCk7CiAgICAgICAgICAgIGlmIChzZWN0aW9uVHlwZSA8IDMpIHsKICAgICAgICAgICAgICAgIC8vIEEuIFRoZSBQaXQgKE5vIGdyb3VuZCwganVzdCBmbG9hdGluZyBwbGF0Zm9ybXMpCiAgICAgICAgICAgICAgICBjb25zdCBnYXBTaXplID0gcm5nLnJhbmdlKDYwMCwgMTIwMCk7CiAgICAgICAgICAgICAgICBjb25zdCBudW1QbGF0cyA9IE1hdGguZmxvb3IoZ2FwU2l6ZSAvIDMwMCk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVBsYXRzOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBweCA9IGN4ICsgKGkgKiAyNTApICsgcm5nLnJhbmdlKDAsIDUwKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBweSA9IGdyb3VuZFkgLSBybmcucmFuZ2UoMTAwLCA0MDApOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHB3ID0gcm5nLnJhbmdlKDEyMCwgMjAwKTsKICAgICAgICAgICAgICAgICAgICBwbGF0Zm9ybXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHB4LCB5OiBweSwgdzogcHcsIGg6IDMwLCB0eXBlOiAnc29saWQnLCByZW5kZXJUeXBlOiAncGxhdGZvcm0nCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmNlIGZvciBGbHllciBFbmVteSBvdmVyIHBpdHMKICAgICAgICAgICAgICAgICAgICBpZiAocm5nLmJvb2woMC40KSkgewogICAgICAgICAgICAgICAgICAgICAgICBlbmVtaWVzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGBmbHllci0ke3B4fWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBFbnRpdHlUeXBlLkVORU1ZLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidHlwZTogJ2ZseWVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IHB4LCB5OiBweSAtIDIwMCwgdzogNTAsIGg6IDQwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdng6IDAsIHZ5OiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoZW1lLmFjY2VudENvbG9yLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVhbHRoOiAyLCBtYXhIZWFsdGg6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0dyb3VuZGVkOiBmYWxzZSwgZmFjaW5nUmlnaHQ6IGZhbHNlLCBzdGF0ZTogJ2lkbGUnLCBmcmFtZVRpbWVyOiAwLCBqdW1wQ291bnQ6IDAsIGludmluY2libGVUaW1lcjogMAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjeCArPSBnYXBTaXplOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHNlY3Rpb25UeXBlIDwgNikgewogICAgICAgICAgICAgICAgLy8gQi4gSGlnaCBHcm91bmQgLyBMb3cgR3JvdW5kCiAgICAgICAgICAgICAgICBjb25zdCBsZW5ndGggPSBybmcucmFuZ2UoNTAwLCA5MDApOwogICAgICAgICAgICAgICAgLy8gTG93ZXIgZ3JvdW5kCiAgICAgICAgICAgICAgICBwbGF0Zm9ybXMucHVzaCh7IHg6IGN4LCB5OiBncm91bmRZLCB3OiBsZW5ndGgsIGg6IDUwMCwgdHlwZTogJ3NvbGlkJywgcmVuZGVyVHlwZTogJ2dyb3VuZCcgfSk7CiAgICAgICAgICAgICAgICAvLyBIaWdoIHBsYXRmb3JtCiAgICAgICAgICAgICAgICBjb25zdCBwbGF0SCA9IDQwOwogICAgICAgICAgICAgICAgY29uc3QgcGxhdFkgPSBncm91bmRZIC0gMzAwOwogICAgICAgICAgICAgICAgcGxhdGZvcm1zLnB1c2goeyB4OiBjeCArIDEwMCwgeTogcGxhdFksIHc6IGxlbmd0aCAtIDIwMCwgaDogcGxhdEgsIHR5cGU6ICdzb2xpZCcsIHJlbmRlclR5cGU6ICdwbGF0Zm9ybScgfSk7CiAgICAgICAgICAgICAgICAvLyBQbGFjZSBUdXJyZXQgb24gaGlnaCBncm91bmQKICAgICAgICAgICAgICAgIGVuZW1pZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGB0dXJyZXQtJHtjeH1gLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IEVudGl0eVR5cGUuRU5FTVksCiAgICAgICAgICAgICAgICAgICAgc3VidHlwZTogJ3R1cnJldCcsCiAgICAgICAgICAgICAgICAgICAgeDogY3ggKyAobGVuZ3RoIC8gMiksIHk6IHBsYXRZIC0gNTAsIHc6IDUwLCBoOiA1MCwKICAgICAgICAgICAgICAgICAgICB2eDogMCwgdnk6IDAsCiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRoZW1lLmhhemFyZENvbG9yLAogICAgICAgICAgICAgICAgICAgIGhlYWx0aDogNCwgbWF4SGVhbHRoOiA0LAogICAgICAgICAgICAgICAgICAgIGlzR3JvdW5kZWQ6IHRydWUsIGZhY2luZ1JpZ2h0OiBmYWxzZSwgc3RhdGU6ICdpZGxlJywgZnJhbWVUaW1lcjogMCwganVtcENvdW50OiAwLCBpbnZpbmNpYmxlVGltZXI6IDAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY3ggKz0gbGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgLy8gQy4gU3RhbmRhcmQgQnJva2VuIEdyb3VuZAogICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gcm5nLnJhbmdlKDMwMCwgNzAwKTsKICAgICAgICAgICAgICAgIHBsYXRmb3Jtcy5wdXNoKHsgeDogY3gsIHk6IGdyb3VuZFksIHc6IGxlbmd0aCwgaDogNTAwLCB0eXBlOiAnc29saWQnLCByZW5kZXJUeXBlOiAnZ3JvdW5kJyB9KTsKICAgICAgICAgICAgICAgIC8vIFBhdHJvbGxlciBFbmVteQogICAgICAgICAgICAgICAgaWYgKGxlbmd0aCA+IDQwMCkgewogICAgICAgICAgICAgICAgICAgIGVuZW1pZXMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBgcGF0cm9sLSR7Y3h9YCwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogRW50aXR5VHlwZS5FTkVNWSwKICAgICAgICAgICAgICAgICAgICAgICAgc3VidHlwZTogJ3BhdHJvbGxlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHg6IGN4ICsgMjAwLCB5OiBncm91bmRZIC0gNjAsIHc6IDYwLCBoOiA2MCwKICAgICAgICAgICAgICAgICAgICAgICAgdng6IDAsIHZ5OiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNmZmZmZmYnLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFsdGg6IDMsIG1heEhlYWx0aDogMywKICAgICAgICAgICAgICAgICAgICAgICAgaXNHcm91bmRlZDogdHJ1ZSwgZmFjaW5nUmlnaHQ6IHJuZy5ib29sKCksIHN0YXRlOiAnaWRsZScsIGZyYW1lVGltZXI6IDAsIGp1bXBDb3VudDogMCwgaW52aW5jaWJsZVRpbWVyOiAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBHYXAgYWZ0ZXIgZ3JvdW5kCiAgICAgICAgICAgICAgICBjeCArPSBsZW5ndGggKyBybmcucmFuZ2UoNTAsIDIwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gUmFuZG9tIGZsb2F0aW5nIHBsYXRmb3JtcyB0aHJvdWdob3V0CiAgICAgICAgICAgIGlmIChybmcuYm9vbCgwLjMpKSB7CiAgICAgICAgICAgICAgICBjb25zdCBweCA9IGN4IC0gMTAwOwogICAgICAgICAgICAgICAgY29uc3QgcHkgPSBncm91bmRZIC0gcm5nLnJhbmdlKDIwMCwgNTAwKTsKICAgICAgICAgICAgICAgIHBsYXRmb3Jtcy5wdXNoKHsKICAgICAgICAgICAgICAgICAgICB4OiBweCwgeTogcHksIHc6IHJuZy5yYW5nZSgxMDAsIDE1MCksIGg6IDIwLCB0eXBlOiAnc29saWQnLCByZW5kZXJUeXBlOiAncGxhdGZvcm0nCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIEhlYXJ0IG9uIGhhcmQgdG8gcmVhY2ggcGxhdGZvcm0KICAgICAgICAgICAgICAgIGlmIChybmcuYm9vbCgwLjUpKSB7CiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlibGVzLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBpZDogYGhlYXJ0LSR7cHh9YCwKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogRW50aXR5VHlwZS5DT0xMRUNUSUJMRSwKICAgICAgICAgICAgICAgICAgICAgICAgeDogcHggKyAyMCwgeTogcHkgLSA1MCwgdzogMzAsIGg6IDMwLAogICAgICAgICAgICAgICAgICAgICAgICB2eDogMCwgdnk6IDAsIGNvbG9yOiAnI2ZiNzE4NScsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWx0aDogMSwgbWF4SGVhbHRoOiAxLCBpc0dyb3VuZGVkOiBmYWxzZSwgZmFjaW5nUmlnaHQ6IHRydWUsIHN0YXRlOiAnaWRsZScsIGZyYW1lVGltZXI6IDAsIGp1bXBDb3VudDogMCwgaW52aW5jaWJsZVRpbWVyOiAwCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gRmluYWwgRW5kIFpvbmUKICAgICAgICBwbGF0Zm9ybXMucHVzaCh7IHg6IGN4LCB5OiBncm91bmRZLCB3OiA4MDAsIGg6IDUwMCwgdHlwZTogJ3NvbGlkJywgcmVuZGVyVHlwZTogJ2dyb3VuZCcgfSk7CiAgICB9CiAgICByZXR1cm4gewogICAgICAgIGlkOiBsZXZlbEluZGV4LAogICAgICAgIG5hbWU6IGlzQm9zcyA/IGBCT1NTOiAke3RoZW1lLm5hbWV9YCA6IGAke3RoZW1lLm5hbWV9IC0gWm9uZSAke2xldmVsSW5kZXh9YCwKICAgICAgICB3aWR0aCwKICAgICAgICBoZWlnaHQsCiAgICAgICAgdGhlbWUsCiAgICAgICAgcGxhdGZvcm1zLAogICAgICAgIGVuZW1pZXMsCiAgICAgICAgY29sbGVjdGlibGVzLAogICAgICAgIHByb2plY3RpbGVzLAogICAgICAgIGJvc3MsCiAgICAgICAgc3RhcnRQb3M6IHsgeDogMjAwLCB5OiBoZWlnaHQgLSA0MDAgfSwKICAgICAgICBlbmRQb3M6IHsgeDogd2lkdGggLSAyMDAsIHk6IGhlaWdodCAtIDQwMCB9CiAgICB9Owp9Owo=","@/components/Game":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCB7IHVzZVJlZiwgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7CmltcG9ydCB7IFNwYXJrbGVzLCBUZXJtaW5hbCB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7CmltcG9ydCB7IEVudGl0eVR5cGUgfSBmcm9tICdAL3R5cGVzJzsKaW1wb3J0IHsgR1JBVklUWSwgRlJJQ1RJT04sIE1PVkVfU1BFRUQsIE1BWF9TUEVFRCwgSlVNUF9GT1JDRSwgRkxPVU5ERVJfTE9HT19VUkwsIFRPVEFMX0xFVkVMUywgQ09MT1JTIH0gZnJvbSAnQC9jb25zdGFudHMnOwppbXBvcnQgeyBjaGVja0FBQkIsIHJlc29sdmVDb2xsaXNpb24gfSBmcm9tICdAL3V0aWxzL2dlb21ldHJ5JzsKaW1wb3J0IHsgZ2VuZXJhdGVMZXZlbCB9IGZyb20gJ0Avc2VydmljZXMvTGV2ZWxHZW5lcmF0b3InOwppbXBvcnQgeyBhdWRpb01hbmFnZXIgfSBmcm9tICdAL3V0aWxzL2F1ZGlvJzsKZXhwb3J0IGNvbnN0IEdhbWUgPSAoeyBzZXR0aW5ncywgb25FeGl0LCBvbldpbiB9KSA9PiB7CiAgICBjb25zdCBjYW52YXNSZWYgPSB1c2VSZWYobnVsbCk7CiAgICBjb25zdCBbbGV2ZWxJbmRleCwgc2V0TGV2ZWxJbmRleF0gPSB1c2VTdGF0ZSgxKTsKICAgIGNvbnN0IFtoZWFsdGgsIHNldEhlYWx0aF0gPSB1c2VTdGF0ZSg1KTsKICAgIGNvbnN0IFtwYXVzZWQsIHNldFBhdXNlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZSh0cnVlKTsKICAgIGNvbnN0IFtnYW1lT3Zlciwgc2V0R2FtZU92ZXJdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgLy8gRGV2IFRlcm1pbmFsIFN0YXRlCiAgICBjb25zdCBbc2hvd1Rlcm1pbmFsLCBzZXRTaG93VGVybWluYWxdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgW3Rlcm1JbnB1dCwgc2V0VGVybUlucHV0XSA9IHVzZVN0YXRlKCcnKTsKICAgIGNvbnN0IFt0ZXJtTG9nLCBzZXRUZXJtTG9nXSA9IHVzZVN0YXRlKFsnPiBGbG91bmRlciBEZXYgQ29uc29sZSB2MS4wJ10pOwogICAgY29uc3QgdGVybWluYWxJbnB1dFJlZiA9IHVzZVJlZihudWxsKTsKICAgIC8vIEFzc2V0cwogICAgY29uc3QgcGxheWVySW1hZ2UgPSB1c2VSZWYobmV3IEltYWdlKCkpOwogICAgLy8gR2FtZSBTdGF0ZSBSZWZzCiAgICBjb25zdCBnYW1lU3RhdGUgPSB1c2VSZWYoewogICAgICAgIGxldmVsOiBudWxsLAogICAgICAgIHBsYXllcjogewogICAgICAgICAgICBpZDogJ3BsYXllcicsCiAgICAgICAgICAgIHR5cGU6IEVudGl0eVR5cGUuUExBWUVSLAogICAgICAgICAgICB4OiAwLCB5OiAwLCB3OiA0MCwgaDogNDAsCiAgICAgICAgICAgIHZ4OiAwLCB2eTogMCwKICAgICAgICAgICAgY29sb3I6IENPTE9SUy5wbGF5ZXIsCiAgICAgICAgICAgIGhlYWx0aDogNSwgbWF4SGVhbHRoOiA1LAogICAgICAgICAgICBpc0dyb3VuZGVkOiBmYWxzZSwKICAgICAgICAgICAgZmFjaW5nUmlnaHQ6IHRydWUsCiAgICAgICAgICAgIHN0YXRlOiAnaWRsZScsCiAgICAgICAgICAgIGZyYW1lVGltZXI6IDAsCiAgICAgICAgICAgIGp1bXBDb3VudDogMCwKICAgICAgICAgICAgaW52aW5jaWJsZVRpbWVyOiAwCiAgICAgICAgfSwKICAgICAgICBwYXJ0aWNsZXM6IFtdLAogICAgICAgIGNhbWVyYTogeyB4OiAwLCB5OiAwIH0sCiAgICAgICAga2V5czoge30sCiAgICAgICAgcHJldkp1bXBQcmVzc2VkOiBmYWxzZSwKICAgICAgICBsYXN0VGltZTogMCwKICAgICAgICBzaGFrZTogMCwKICAgICAgICBkYW1hZ2VTaGFrZTogMCwKICAgICAgICBiYWNrZ3JvdW5kT2Zmc2V0OiAwCiAgICB9KTsKICAgIC8vIExvYWQgQXNzZXRzIGFuZCBJbml0IEF1ZGlvCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIHBsYXllckltYWdlLmN1cnJlbnQuc3JjID0gRkxPVU5ERVJfTE9HT19VUkw7CiAgICAgICAgcGxheWVySW1hZ2UuY3VycmVudC5vbmxvYWQgPSAoKSA9PiBzZXRMb2FkaW5nKGZhbHNlKTsKICAgICAgICBwbGF5ZXJJbWFnZS5jdXJyZW50Lm9uZXJyb3IgPSAoKSA9PiBzZXRMb2FkaW5nKGZhbHNlKTsKICAgICAgICAvLyBJbml0IEF1ZGlvCiAgICAgICAgYXVkaW9NYW5hZ2VyLmluaXQoKTsKICAgICAgICBhdWRpb01hbmFnZXIuc2V0Vm9sdW1lKHNldHRpbmdzLnNmeFZvbHVtZSk7CiAgICAgICAgc3RhcnRMZXZlbCgxKTsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzCiAgICB9LCBbXSk7CiAgICAvLyBVcGRhdGUgVm9sdW1lIHdoZW4gc2V0dGluZ3MgY2hhbmdlCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGF1ZGlvTWFuYWdlci5zZXRWb2x1bWUoc2V0dGluZ3Muc2Z4Vm9sdW1lKTsKICAgIH0sIFtzZXR0aW5ncy5zZnhWb2x1bWVdKTsKICAgIC8vIEhhbmRsZSBSZXNpemUgJiBIaWdoIERQSQogICAgY29uc3QgaGFuZGxlUmVzaXplID0gdXNlQ2FsbGJhY2soKCkgPT4gewogICAgICAgIGlmIChjYW52YXNSZWYuY3VycmVudCkgewogICAgICAgICAgICBjb25zdCBkcHIgPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxOwogICAgICAgICAgICBjYW52YXNSZWYuY3VycmVudC53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICogZHByOwogICAgICAgICAgICBjYW52YXNSZWYuY3VycmVudC5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiBkcHI7CiAgICAgICAgICAgIGNhbnZhc1JlZi5jdXJyZW50LnN0eWxlLndpZHRoID0gYCR7d2luZG93LmlubmVyV2lkdGh9cHhgOwogICAgICAgICAgICBjYW52YXNSZWYuY3VycmVudC5zdHlsZS5oZWlnaHQgPSBgJHt3aW5kb3cuaW5uZXJIZWlnaHR9cHhgOwogICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXNSZWYuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgICAgICBpZiAoY3R4KQogICAgICAgICAgICAgICAgY3R4LnNjYWxlKGRwciwgZHByKTsKICAgICAgICB9CiAgICB9LCBbXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGhhbmRsZVJlc2l6ZSgpOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBoYW5kbGVSZXNpemUpOwogICAgICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgaGFuZGxlUmVzaXplKTsKICAgIH0sIFtoYW5kbGVSZXNpemVdKTsKICAgIC8vIEZvY3VzIHRlcm1pbmFsIGlucHV0IHdoZW4gb3BlbmVkCiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGlmIChzaG93VGVybWluYWwgJiYgdGVybWluYWxJbnB1dFJlZi5jdXJyZW50KSB7CiAgICAgICAgICAgIHRlcm1pbmFsSW5wdXRSZWYuY3VycmVudC5mb2N1cygpOwogICAgICAgIH0KICAgIH0sIFtzaG93VGVybWluYWxdKTsKICAgIGNvbnN0IHN0YXJ0TGV2ZWwgPSAoaWR4KSA9PiB7CiAgICAgICAgY29uc3QgZGF0YSA9IGdlbmVyYXRlTGV2ZWwoaWR4KTsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5sZXZlbCA9IGRhdGE7CiAgICAgICAgcmVzZXRQbGF5ZXJQb3NpdGlvbihkYXRhKTsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5wYXJ0aWNsZXMgPSBbXTsKICAgICAgICBzZXRHYW1lT3ZlcihmYWxzZSk7CiAgICAgICAgc2V0SGVhbHRoKDUpOwogICAgICAgIHNldFBhdXNlZChmYWxzZSk7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuc2hha2UgPSAwOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LmRhbWFnZVNoYWtlID0gMDsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5wbGF5ZXIuaW52aW5jaWJsZVRpbWVyID0gMDsKICAgICAgICAvLyBTbmFwIGNhbWVyYSBpbW1lZGlhdGVseSB0byBwbGF5ZXIsIGNsYW1wZWQgdG8gYm91bmRzCiAgICAgICAgY29uc3Qgc2NyZWVuVyA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgIGNvbnN0IHNjcmVlbkggPSB3aW5kb3cuaW5uZXJIZWlnaHQ7CiAgICAgICAgLy8gQ2VudGVyIGNhbWVyYSBvbiBwbGF5ZXIgc3RhcnQgcG9zCiAgICAgICAgbGV0IGNhbVggPSBkYXRhLnN0YXJ0UG9zLnggLSBzY3JlZW5XIC8gMiArIDIwOyAvLyArMjAgZm9yIGhhbGYgcGxheWVyIHdpZHRoCiAgICAgICAgbGV0IGNhbVkgPSBkYXRhLnN0YXJ0UG9zLnkgLSBzY3JlZW5IIC8gMjsKICAgICAgICAvLyBDbGFtcCBDYW1lcmEKICAgICAgICBjYW1YID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY2FtWCwgZGF0YS53aWR0aCAtIHNjcmVlblcpKTsKICAgICAgICBjYW1ZID0gTWF0aC5tYXgoLTIwMCwgTWF0aC5taW4oY2FtWSwgZGF0YS5oZWlnaHQgLSBzY3JlZW5IICsgMjAwKSk7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQuY2FtZXJhLnggPSBjYW1YOwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LmNhbWVyYS55ID0gY2FtWTsKICAgICAgICAvLyBSZXNldCBsYXN0VGltZSB0byBhdm9pZCBodWdlIGR0IHNwaWtlIG9uIHJlc3RhcnQKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5sYXN0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpOwogICAgfTsKICAgIGNvbnN0IHJlc2V0UGxheWVyUG9zaXRpb24gPSAobGV2ZWwpID0+IHsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5wbGF5ZXIueCA9IGxldmVsLnN0YXJ0UG9zLng7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQucGxheWVyLnkgPSBsZXZlbC5zdGFydFBvcy55OwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LnBsYXllci52eCA9IDA7CiAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQucGxheWVyLnZ5ID0gMDsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5wbGF5ZXIuanVtcENvdW50ID0gMDsKICAgICAgICBnYW1lU3RhdGUuY3VycmVudC5wbGF5ZXIuaW52aW5jaWJsZVRpbWVyID0gMDsKICAgIH07CiAgICBjb25zdCBoYW5kbGVSZXN0YXJ0ID0gKCkgPT4gewogICAgICAgIHN0YXJ0TGV2ZWwobGV2ZWxJbmRleCk7CiAgICB9OwogICAgY29uc3QgZXhlY3V0ZUNvbW1hbmQgPSAoaW5wdXQpID0+IHsKICAgICAgICBjb25zdCBwYXJ0cyA9IGlucHV0LnRyaW0oKS5zcGxpdCgnICcpOwogICAgICAgIGNvbnN0IGNtZCA9IHBhcnRzWzBdLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgY29uc3QgYXJncyA9IHBhcnRzLnNsaWNlKDEpOwogICAgICAgIHNldFRlcm1Mb2cocHJldiA9PiBbLi4ucHJldiwgYCQgJHtpbnB1dH1gXSk7CiAgICAgICAgaWYgKGNtZCA9PT0gJ2xldmVsLnNldCcgfHwgY21kID09PSAnbGV2ZWwnKSB7CiAgICAgICAgICAgIGNvbnN0IGx2bCA9IHBhcnNlSW50KGFyZ3NbMF0pOwogICAgICAgICAgICBpZiAoIWlzTmFOKGx2bCkgJiYgbHZsID49IDEgJiYgbHZsIDw9IFRPVEFMX0xFVkVMUykgewogICAgICAgICAgICAgICAgc2V0TGV2ZWxJbmRleChsdmwpOwogICAgICAgICAgICAgICAgc3RhcnRMZXZlbChsdmwpOwogICAgICAgICAgICAgICAgc2V0VGVybUxvZyhwcmV2ID0+IFsuLi5wcmV2LCBgPiBMb2FkZWQgbGV2ZWwgJHtsdmx9YF0pOwogICAgICAgICAgICAgICAgc2V0U2hvd1Rlcm1pbmFsKGZhbHNlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHNldFRlcm1Mb2cocHJldiA9PiBbLi4ucHJldiwgYD4gRXJyb3I6IEludmFsaWQgbGV2ZWwgKDEtJHtUT1RBTF9MRVZFTFN9KWBdKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChjbWQgPT09ICdoZWFsJykgewogICAgICAgICAgICBzZXRIZWFsdGgoNSk7CiAgICAgICAgICAgIHNldFRlcm1Mb2cocHJldiA9PiBbLi4ucHJldiwgYD4gSGVhbHRoIHJlc3RvcmVkIHRvIDVgXSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gJ2NsZWFyJykgewogICAgICAgICAgICBzZXRUZXJtTG9nKFsnPiBDb25zb2xlIGNsZWFyZWQnXSk7CiAgICAgICAgfQogICAgICAgIGVsc2UgaWYgKGNtZCA9PT0gJ2hlbHAnKSB7CiAgICAgICAgICAgIHNldFRlcm1Mb2cocHJldiA9PiBbLi4ucHJldiwgYD4gQ29tbWFuZHM6IGxldmVsLnNldCA8bj4sIGhlYWwsIGNsZWFyYF0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgc2V0VGVybUxvZyhwcmV2ID0+IFsuLi5wcmV2LCBgPiBVbmtub3duIGNvbW1hbmQ6ICR7Y21kfWBdKTsKICAgICAgICB9CiAgICAgICAgc2V0VGVybUlucHV0KCcnKTsKICAgIH07CiAgICBjb25zdCBjcmVhdGVQYXJ0aWNsZSA9ICh4LCB5LCBjb2xvciwgc3BlZWQgPSAyLCBzaXplID0gMywgY291bnQgPSAxKSA9PiB7CiAgICAgICAgaWYgKCFzZXR0aW5ncy5wYXJ0aWNsZXMpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQucGFydGljbGVzLnB1c2goewogICAgICAgICAgICAgICAgeCwgeSwKICAgICAgICAgICAgICAgIHZ4OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzcGVlZCwKICAgICAgICAgICAgICAgIHZ5OiAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzcGVlZCwKICAgICAgICAgICAgICAgIGxpZmU6IDEuMCwKICAgICAgICAgICAgICAgIG1heExpZmU6IDEuMCwKICAgICAgICAgICAgICAgIHNpemU6IE1hdGgucmFuZG9tKCkgKiBzaXplICsgMSwKICAgICAgICAgICAgICAgIGNvbG9yLAogICAgICAgICAgICAgICAgZGVjYXk6IDAuMDIgKyBNYXRoLnJhbmRvbSgpICogMC4wMwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3Qgc3Bhd25Qcm9qZWN0aWxlID0gKHgsIHksIHZ4LCB2eSkgPT4gewogICAgICAgIGlmICghZ2FtZVN0YXRlLmN1cnJlbnQubGV2ZWwpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBhdWRpb01hbmFnZXIucGxheVNob290KCk7IC8vIFR1cnJldCBzb3VuZAogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50LmxldmVsLnByb2plY3RpbGVzLnB1c2goewogICAgICAgICAgICBpZDogYHByb2otJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCl9YCwKICAgICAgICAgICAgdHlwZTogRW50aXR5VHlwZS5QUk9KRUNUSUxFLAogICAgICAgICAgICB4LCB5LCB3OiAxNSwgaDogMTUsCiAgICAgICAgICAgIHZ4LCB2eSwKICAgICAgICAgICAgY29sb3I6ICcjZmJiZjI0JywgLy8gQW1iZXIKICAgICAgICAgICAgaGVhbHRoOiAxLCBtYXhIZWFsdGg6IDEsCiAgICAgICAgICAgIGlzR3JvdW5kZWQ6IGZhbHNlLCBmYWNpbmdSaWdodDogdnggPiAwLCBzdGF0ZTogJ2lkbGUnLCBmcmFtZVRpbWVyOiAwLCBqdW1wQ291bnQ6IDAsIGludmluY2libGVUaW1lcjogMAogICAgICAgIH0pOwogICAgfTsKICAgIGNvbnN0IHVwZGF0ZSA9IChkdCkgPT4gewogICAgICAgIGlmIChwYXVzZWQgfHwgZ2FtZU92ZXIgfHwgc2hvd1Rlcm1pbmFsIHx8ICFnYW1lU3RhdGUuY3VycmVudC5sZXZlbCkKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIGNvbnN0IHN0YXRlID0gZ2FtZVN0YXRlLmN1cnJlbnQ7CiAgICAgICAgY29uc3QgeyBwbGF5ZXIsIGtleXMsIGxldmVsIH0gPSBzdGF0ZTsKICAgICAgICAvLyBJbnZpbmNpYmlsaXR5IFRpbWVyCiAgICAgICAgaWYgKHBsYXllci5pbnZpbmNpYmxlVGltZXIgPiAwKSB7CiAgICAgICAgICAgIHBsYXllci5pbnZpbmNpYmxlVGltZXIgLT0gKGR0ICogMC4wMTY2Nyk7IC8vIEFwcHJveCBzZWNvbmRzCiAgICAgICAgfQogICAgICAgIC8vIC0tLSBQbGF5ZXIgTW92ZW1lbnQgLS0tCiAgICAgICAgaWYgKGtleXNbJ0Fycm93UmlnaHQnXSB8fCBrZXlzWydkJ10pIHsKICAgICAgICAgICAgcGxheWVyLnZ4ICs9IE1PVkVfU1BFRUQ7CiAgICAgICAgICAgIHBsYXllci5mYWNpbmdSaWdodCA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChrZXlzWydBcnJvd0xlZnQnXSB8fCBrZXlzWydhJ10pIHsKICAgICAgICAgICAgcGxheWVyLnZ4IC09IE1PVkVfU1BFRUQ7CiAgICAgICAgICAgIHBsYXllci5mYWNpbmdSaWdodCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICBwbGF5ZXIudnggKj0gRlJJQ1RJT047CiAgICAgICAgcGxheWVyLnZ5ICs9IEdSQVZJVFk7CiAgICAgICAgcGxheWVyLnZ4ID0gTWF0aC5tYXgoTWF0aC5taW4ocGxheWVyLnZ4LCBNQVhfU1BFRUQpLCAtTUFYX1NQRUVEKTsKICAgICAgICAvLyBEb3VibGUgSnVtcAogICAgICAgIGNvbnN0IGp1bXBQcmVzc2VkID0ga2V5c1snQXJyb3dVcCddIHx8IGtleXNbJ3cnXSB8fCBrZXlzWycgJ107CiAgICAgICAgaWYgKHBsYXllci5pc0dyb3VuZGVkKQogICAgICAgICAgICBwbGF5ZXIuanVtcENvdW50ID0gMDsKICAgICAgICBpZiAoanVtcFByZXNzZWQgJiYgIXN0YXRlLnByZXZKdW1wUHJlc3NlZCkgewogICAgICAgICAgICBpZiAocGxheWVyLmlzR3JvdW5kZWQgfHwgcGxheWVyLmp1bXBDb3VudCA8IDIpIHsKICAgICAgICAgICAgICAgIHBsYXllci52eSA9IEpVTVBfRk9SQ0U7CiAgICAgICAgICAgICAgICBwbGF5ZXIuaXNHcm91bmRlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgcGxheWVyLmp1bXBDb3VudCsrOwogICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLnBsYXlKdW1wKCk7IC8vIFNPVU5ECiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmp1bXBDb3VudCA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIGNyZWF0ZVBhcnRpY2xlKHBsYXllci54ICsgcGxheWVyLncgLyAyLCBwbGF5ZXIueSArIHBsYXllci5oLCBsZXZlbC50aGVtZS5hY2NlbnRDb2xvciwgOCwgNCwgMTApOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUGFydGljbGUocGxheWVyLnggKyBwbGF5ZXIudyAvIDIsIHBsYXllci55ICsgcGxheWVyLmgsICcjZmZmJywgNSwgNSwgNSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc3RhdGUucHJldkp1bXBQcmVzc2VkID0ganVtcFByZXNzZWQ7CiAgICAgICAgcGxheWVyLnggKz0gcGxheWVyLnZ4OwogICAgICAgIHBsYXllci55ICs9IHBsYXllci52eTsKICAgICAgICAvLyAtLS0gQ29sbGlzaW9uIERldGVjdGlvbiAtLS0KICAgICAgICBwbGF5ZXIuaXNHcm91bmRlZCA9IGZhbHNlOwogICAgICAgIGxldmVsLnBsYXRmb3Jtcy5mb3JFYWNoKHBsYXQgPT4gewogICAgICAgICAgICBjb25zdCB4T3ZlcmxhcCA9IHBsYXllci54IDwgcGxhdC54ICsgcGxhdC53ICsgMTAwICYmIHBsYXllci54ICsgcGxheWVyLncgPiBwbGF0LnggLSAxMDA7CiAgICAgICAgICAgIGNvbnN0IHlEaXN0ID0gTWF0aC5hYnMocGxheWVyLnkgLSBwbGF0LnkpOwogICAgICAgICAgICBpZiAoeE92ZXJsYXAgJiYgeURpc3QgPCAxMDAwKQogICAgICAgICAgICAgICAgcmVzb2x2ZUNvbGxpc2lvbihwbGF5ZXIsIHBsYXQpOwogICAgICAgIH0pOwogICAgICAgIGlmIChwbGF5ZXIueSA+IDIwMDApIHsKICAgICAgICAgICAgc2V0SGVhbHRoKDApOwogICAgICAgICAgICBzdGF0ZS5zaGFrZSA9IDIwOyAvLyBGYWxsaW5nIHRvIGRlYXRoIGlzIGluc3RhbnQsIGlnbm9yZXMgaW52aW5jaWJpbGl0eQogICAgICAgICAgICBhdWRpb01hbmFnZXIucGxheURhbWFnZSgpOyAvLyBTT1VORAogICAgICAgIH0KICAgICAgICAvLyAtLS0gQ29sbGVjdGlibGVzIC0tLQogICAgICAgIGZvciAobGV0IGkgPSBsZXZlbC5jb2xsZWN0aWJsZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgICAgICAgICAgY29uc3QgYyA9IGxldmVsLmNvbGxlY3RpYmxlc1tpXTsKICAgICAgICAgICAgYy5mcmFtZVRpbWVyICs9IDAuMDU7CiAgICAgICAgICAgIGMueSArPSBNYXRoLnNpbihjLmZyYW1lVGltZXIpICogMC4zOwogICAgICAgICAgICBpZiAoY2hlY2tBQUJCKHBsYXllciwgYykpIHsKICAgICAgICAgICAgICAgIGNyZWF0ZVBhcnRpY2xlKGMueCArIGMudyAvIDIsIGMueSArIGMuaCAvIDIsIGxldmVsLnRoZW1lLmFjY2VudENvbG9yLCA2LCA0LCAxMik7CiAgICAgICAgICAgICAgICBpZiAoaGVhbHRoIDwgNSkKICAgICAgICAgICAgICAgICAgICBzZXRIZWFsdGgoaCA9PiBNYXRoLm1pbihoICsgMSwgNSkpOwogICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLnBsYXlDb2xsZWN0KCk7IC8vIFNPVU5ECiAgICAgICAgICAgICAgICBsZXZlbC5jb2xsZWN0aWJsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8vIC0tLSBFbmVtaWVzIC0tLQogICAgICAgIGZvciAobGV0IGkgPSBsZXZlbC5lbmVtaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgIGNvbnN0IGVuZW15ID0gbGV2ZWwuZW5lbWllc1tpXTsKICAgICAgICAgICAgaWYgKGVuZW15LnN1YnR5cGUgPT09ICdmbHllcicpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gcGxheWVyLnggLSBlbmVteS54OwogICAgICAgICAgICAgICAgY29uc3QgZHkgPSBwbGF5ZXIueSAtIGVuZW15Lnk7CiAgICAgICAgICAgICAgICBjb25zdCBkaXN0ID0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTsKICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgNjAwKSB7CiAgICAgICAgICAgICAgICAgICAgZW5lbXkudnggKz0gKGR4IC8gZGlzdCkgKiAwLjI7CiAgICAgICAgICAgICAgICAgICAgZW5lbXkudnkgKz0gKGR5IC8gZGlzdCkgKiAwLjI7CiAgICAgICAgICAgICAgICAgICAgZW5lbXkudnggKj0gMC45NTsKICAgICAgICAgICAgICAgICAgICBlbmVteS52eSAqPSAwLjk1OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZW5lbXkueCArPSBlbmVteS52eDsKICAgICAgICAgICAgICAgIGVuZW15LnkgKz0gZW5lbXkudnk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZW5lbXkuc3VidHlwZSA9PT0gJ3R1cnJldCcpIHsKICAgICAgICAgICAgICAgIGVuZW15LmZyYW1lVGltZXIgKz0gZHQ7CiAgICAgICAgICAgICAgICBpZiAoZW5lbXkuZnJhbWVUaW1lciA+IDE1MCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR4ID0gcGxheWVyLnggLSBlbmVteS54OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGR5ID0gcGxheWVyLnkgLSBlbmVteS55OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpOwogICAgICAgICAgICAgICAgICAgIGlmIChkaXN0IDwgODAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNwYXduUHJvamVjdGlsZShlbmVteS54ICsgZW5lbXkudyAvIDIsIGVuZW15LnkgKyBlbmVteS5oIC8gMiwgKGR4IC8gZGlzdCkgKiA4LCAoZHkgLyBkaXN0KSAqIDgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbmVteS5mcmFtZVRpbWVyID0gMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFBhdHJvbGxlcgogICAgICAgICAgICAgICAgaWYgKCFlbmVteS52eCkKICAgICAgICAgICAgICAgICAgICBlbmVteS52eCA9IDI7CiAgICAgICAgICAgICAgICBlbmVteS54ICs9IGVuZW15LnZ4OwogICAgICAgICAgICAgICAgaWYgKE1hdGgucmFuZG9tKCkgPCAwLjAxKQogICAgICAgICAgICAgICAgICAgIGVuZW15LnZ4ICo9IC0xOwogICAgICAgICAgICAgICAgZW5lbXkudnkgKz0gR1JBVklUWTsKICAgICAgICAgICAgICAgIGVuZW15LnkgKz0gZW5lbXkudnk7CiAgICAgICAgICAgICAgICBsZXZlbC5wbGF0Zm9ybXMuZm9yRWFjaChwbGF0ID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoZW5lbXkueCAtIHBsYXQueCkgPCA1MDAgJiYgTWF0aC5hYnMoZW5lbXkueSAtIHBsYXQueSkgPCA1MDApCiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVDb2xsaXNpb24oZW5lbXksIHBsYXQpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZW5lbXkuZmFjaW5nUmlnaHQgPSBlbmVteS52eCA+IDA7CiAgICAgICAgICAgIGlmIChjaGVja0FBQkIocGxheWVyLCBlbmVteSkpIHsKICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIudnkgPiAwICYmIHBsYXllci55ICsgcGxheWVyLmggPCBlbmVteS55ICsgZW5lbXkuaCAqIDAuOCkgewogICAgICAgICAgICAgICAgICAgIC8vIFBsYXllciBraWxscyBlbmVteSAoU3RvbXApCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlUGFydGljbGUoZW5lbXkueCArIGVuZW15LncgLyAyLCBlbmVteS55ICsgZW5lbXkuaCAvIDIsIGVuZW15LmNvbG9yLCA4LCA4LCAxMik7CiAgICAgICAgICAgICAgICAgICAgbGV2ZWwuZW5lbWllcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZ5ID0gLTEyOwogICAgICAgICAgICAgICAgICAgIHBsYXllci5qdW1wQ291bnQgPSAwOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLnNoYWtlID0gMzsKICAgICAgICAgICAgICAgICAgICBhdWRpb01hbmFnZXIucGxheUVuZW15RGVhdGgoKTsgLy8gU09VTkQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIEVuZW15IGhpdHMgcGxheWVyCiAgICAgICAgICAgICAgICAgICAgaWYgKHBsYXllci5pbnZpbmNpYmxlVGltZXIgPD0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWR1Y2VkIGtub2NrYmFjayAoTUFYX1NQRUVEIGlzIDYsIHNvIDMgaXMgaGFsZiBzcGVlZCkKICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBwcmV2ZW50cyAic3BlZWRpbmcgdXAiIHdoZW4gaGl0CiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllci52eCA9IHBsYXllci54IDwgZW5lbXkueCA/IC0zIDogMzsKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZ5ID0gLTU7IC8vIFNsaWdodCBwb3AgdXAKICAgICAgICAgICAgICAgICAgICAgICAgc2V0SGVhbHRoKGggPT4gaCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5kYW1hZ2VTaGFrZSA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVQYXJ0aWNsZShwbGF5ZXIueCwgcGxheWVyLnksICcjZmZmJywgNSwgMiwgNSk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyaWdnZXIgSW52aW5jaWJpbGl0eSAoMiBzZWNvbmRzKQogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW52aW5jaWJsZVRpbWVyID0gMi4wOwogICAgICAgICAgICAgICAgICAgICAgICBhdWRpb01hbmFnZXIucGxheURhbWFnZSgpOyAvLyBTT1VORAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyAtLS0gUHJvamVjdGlsZXMgLS0tCiAgICAgICAgZm9yIChsZXQgaSA9IGxldmVsLnByb2plY3RpbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgIGNvbnN0IHAgPSBsZXZlbC5wcm9qZWN0aWxlc1tpXTsKICAgICAgICAgICAgcC54ICs9IHAudng7CiAgICAgICAgICAgIHAueSArPSBwLnZ5OwogICAgICAgICAgICBpZiAoTWF0aC5hYnMocC54IC0gcGxheWVyLngpID4gMTUwMCkgewogICAgICAgICAgICAgICAgbGV2ZWwucHJvamVjdGlsZXMuc3BsaWNlKGksIDEpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGNoZWNrQUFCQihwLCBwbGF5ZXIpKSB7CiAgICAgICAgICAgICAgICBpZiAocGxheWVyLmludmluY2libGVUaW1lciA8PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgc2V0SGVhbHRoKGggPT4gaCAtIDEpOwogICAgICAgICAgICAgICAgICAgIHN0YXRlLmRhbWFnZVNoYWtlID0gODsKICAgICAgICAgICAgICAgICAgICBjcmVhdGVQYXJ0aWNsZShwbGF5ZXIueCwgcGxheWVyLnksIGxldmVsLnRoZW1lLmhhemFyZENvbG9yLCA1LCAzLCA4KTsKICAgICAgICAgICAgICAgICAgICBwbGF5ZXIuaW52aW5jaWJsZVRpbWVyID0gMi4wOyAvLyBJbnZpbmNpYmlsaXR5IG9uIHByb2plY3RpbGUgaGl0CiAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLnBsYXlEYW1hZ2UoKTsgLy8gU09VTkQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldmVsLnByb2plY3RpbGVzLnNwbGljZShpLCAxKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBoaXQgPSBmYWxzZTsKICAgICAgICAgICAgbGV2ZWwucGxhdGZvcm1zLmZvckVhY2gocGxhdCA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY2hlY2tBQUJCKHAsIHBsYXQpKQogICAgICAgICAgICAgICAgICAgIGhpdCA9IHRydWU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoaGl0KSB7CiAgICAgICAgICAgICAgICBjcmVhdGVQYXJ0aWNsZShwLngsIHAueSwgcC5jb2xvciwgMywgMiwgNCk7CiAgICAgICAgICAgICAgICBsZXZlbC5wcm9qZWN0aWxlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gLS0tIEJvc3MgLS0tCiAgICAgICAgaWYgKGxldmVsLmJvc3MgJiYgbGV2ZWwuYm9zcy5oZWFsdGggPiAwKSB7CiAgICAgICAgICAgIGNvbnN0IGJvc3MgPSBsZXZlbC5ib3NzOwogICAgICAgICAgICBjb25zdCBkeCA9IHBsYXllci54IC0gYm9zcy54OwogICAgICAgICAgICBjb25zdCBkeSA9IHBsYXllci55IC0gYm9zcy55OwogICAgICAgICAgICBib3NzLnggKz0gKGR4ICogMC4wMSk7CiAgICAgICAgICAgIGJvc3MueSArPSAoZHkgKiAwLjAxKTsKICAgICAgICAgICAgaWYgKGNoZWNrQUFCQihwbGF5ZXIsIGJvc3MpKSB7CiAgICAgICAgICAgICAgICBpZiAocGxheWVyLnZ5ID4gMCAmJiBwbGF5ZXIueSA8IGJvc3MueSkgewogICAgICAgICAgICAgICAgICAgIGJvc3MuaGVhbHRoLS07CiAgICAgICAgICAgICAgICAgICAgcGxheWVyLnZ5ID0gLTEyOwogICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5wbGF5RW5lbXlEZWF0aCgpOyAvLyBTb3VuZCBmb3IgYm9zcyBoaXQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmIChwbGF5ZXIuaW52aW5jaWJsZVRpbWVyIDw9IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0SGVhbHRoKGggPT4gaCAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXIudnggPSAtODsKICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuZGFtYWdlU2hha2UgPSAxNTsKICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyLmludmluY2libGVUaW1lciA9IDIuMDsKICAgICAgICAgICAgICAgICAgICAgICAgYXVkaW9NYW5hZ2VyLnBsYXlEYW1hZ2UoKTsgLy8gU09VTkQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gLS0tIFBhcnRpY2xlcyAtLS0KICAgICAgICBmb3IgKGxldCBpID0gc3RhdGUucGFydGljbGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgICAgIGNvbnN0IHAgPSBzdGF0ZS5wYXJ0aWNsZXNbaV07CiAgICAgICAgICAgIHAueCArPSBwLnZ4OwogICAgICAgICAgICBwLnkgKz0gcC52eTsKICAgICAgICAgICAgcC5saWZlIC09IHAuZGVjYXk7CiAgICAgICAgICAgIGlmIChwLmxpZmUgPD0gMCkKICAgICAgICAgICAgICAgIHN0YXRlLnBhcnRpY2xlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgfQogICAgICAgIC8vIC0tLSBMZXZlbCBFbmQgLS0tCiAgICAgICAgY29uc3QgZGlzdFRvRW5kID0gTWF0aC5zcXJ0KE1hdGgucG93KHBsYXllci54IC0gbGV2ZWwuZW5kUG9zLngsIDIpICsgTWF0aC5wb3cocGxheWVyLnkgLSBsZXZlbC5lbmRQb3MueSwgMikpOwogICAgICAgIGlmIChkaXN0VG9FbmQgPCAxNTAgJiYgKCFsZXZlbC5ib3NzIHx8IGxldmVsLmJvc3MuaGVhbHRoIDw9IDApKSB7CiAgICAgICAgICAgIGlmIChsZXZlbEluZGV4IDwgVE9UQUxfTEVWRUxTKSB7CiAgICAgICAgICAgICAgICBzZXRMZXZlbEluZGV4KHByZXYgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHQgPSBwcmV2ICsgMTsKICAgICAgICAgICAgICAgICAgICBzdGFydExldmVsKG5leHQpOwogICAgICAgICAgICAgICAgICAgIGF1ZGlvTWFuYWdlci5wbGF5Q29sbGVjdCgpOyAvLyBMZXZlbCBmaW5pc2ggc291bmQKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgb25XaW4oKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyAtLS0gQ2FtZXJhIEZvbGxvdyAtLS0KICAgICAgICBjb25zdCBzY3JlZW5XID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgICAgY29uc3Qgc2NyZWVuSCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgICBjb25zdCB0YXJnZXRDYW1YID0gcGxheWVyLnggLSAoc2NyZWVuVyAvIDIpICsgKHBsYXllci52eCAqIDIwKTsKICAgICAgICBjb25zdCB0YXJnZXRDYW1ZID0gcGxheWVyLnkgLSAoc2NyZWVuSCAvIDIpICsgKHBsYXllci52eSAqIDEwKTsKICAgICAgICAvLyBTbW9vdGggTGVycAogICAgICAgIHN0YXRlLmNhbWVyYS54ICs9ICh0YXJnZXRDYW1YIC0gc3RhdGUuY2FtZXJhLngpICogMC4wODsKICAgICAgICBzdGF0ZS5jYW1lcmEueSArPSAodGFyZ2V0Q2FtWSAtIHN0YXRlLmNhbWVyYS55KSAqIDAuMDg7CiAgICAgICAgLy8gQ2xhbXAgQ2FtZXJhIHRvIExldmVsIEJvdW5kcwogICAgICAgIHN0YXRlLmNhbWVyYS54ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oc3RhdGUuY2FtZXJhLngsIGxldmVsLndpZHRoIC0gc2NyZWVuVykpOwogICAgICAgIHN0YXRlLmNhbWVyYS55ID0gTWF0aC5tYXgoLTUwMCwgTWF0aC5taW4oc3RhdGUuY2FtZXJhLnksIGxldmVsLmhlaWdodCAtIHNjcmVlbkggKyAyMDApKTsKICAgICAgICBzdGF0ZS5iYWNrZ3JvdW5kT2Zmc2V0ICs9IDAuMjsKICAgICAgICAvLyBEZWNheSBTaGFrZXMKICAgICAgICBpZiAoc3RhdGUuc2hha2UgPiAwKSB7CiAgICAgICAgICAgIHN0YXRlLmNhbWVyYS54ICs9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHN0YXRlLnNoYWtlOwogICAgICAgICAgICBzdGF0ZS5jYW1lcmEueSArPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGF0ZS5zaGFrZTsKICAgICAgICAgICAgc3RhdGUuc2hha2UgKj0gMC45OwogICAgICAgICAgICBpZiAoc3RhdGUuc2hha2UgPCAwLjUpCiAgICAgICAgICAgICAgICBzdGF0ZS5zaGFrZSA9IDA7CiAgICAgICAgfQogICAgICAgIGlmIChzdGF0ZS5kYW1hZ2VTaGFrZSA+IDApIHsKICAgICAgICAgICAgc3RhdGUuZGFtYWdlU2hha2UgKj0gMC45OwogICAgICAgICAgICBpZiAoc3RhdGUuZGFtYWdlU2hha2UgPCAwLjUpCiAgICAgICAgICAgICAgICBzdGF0ZS5kYW1hZ2VTaGFrZSA9IDA7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGRyYXcgPSAoY3R4KSA9PiB7CiAgICAgICAgY29uc3Qgc3RhdGUgPSBnYW1lU3RhdGUuY3VycmVudDsKICAgICAgICBpZiAoIXN0YXRlLmxldmVsKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgdGhlbWUgPSBzdGF0ZS5sZXZlbC50aGVtZTsKICAgICAgICBjb25zdCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogICAgICAgIGNvbnN0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDsKICAgICAgICBkcmF3QmFja2dyb3VuZChjdHgsIHdpZHRoLCBoZWlnaHQsIHRoZW1lKTsKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIGlmIChzdGF0ZS5kYW1hZ2VTaGFrZSA+IDApIHsKICAgICAgICAgICAgY29uc3QgZHggPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGF0ZS5kYW1hZ2VTaGFrZTsKICAgICAgICAgICAgY29uc3QgZHkgPSAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKiBzdGF0ZS5kYW1hZ2VTaGFrZTsKICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShkeCwgZHkpOwogICAgICAgIH0KICAgICAgICBjdHgudHJhbnNsYXRlKC1zdGF0ZS5jYW1lcmEueCwgLXN0YXRlLmNhbWVyYS55KTsKICAgICAgICAvLyAtLS0gRHJhdyBQbGF0Zm9ybXMgLS0tCiAgICAgICAgc3RhdGUubGV2ZWwucGxhdGZvcm1zLmZvckVhY2gocGxhdCA9PiB7CiAgICAgICAgICAgIGlmIChwbGF0LnJlbmRlclR5cGUgPT09ICdpbnZpc2libGUnKQogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICBpZiAocGxhdC54ID4gc3RhdGUuY2FtZXJhLnggKyB3aWR0aCB8fCBwbGF0LnggKyBwbGF0LncgPCBzdGF0ZS5jYW1lcmEueCkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgaWYgKHBsYXQucmVuZGVyVHlwZSA9PT0gJ2dyb3VuZCcpIHsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGVtZS5wbGF0Zm9ybUNvbG9yOwogICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHBsYXQueCwgcGxhdC55LCBwbGF0LncsIHBsYXQuaCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhlbWUucGxhdGZvcm1EZXRhaWw7CiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QocGxhdC54LCBwbGF0LnksIHBsYXQudywgMTUpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoZW1lLmJhY2tncm91bmRUb3A7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBsYXQudzsgaSArPSA1MCkgewogICAgICAgICAgICAgICAgICAgIGlmICgocGxhdC54ICsgaSkgJSAyMDAgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHBsYXQueCArIGksIHBsYXQueSArIDE1LCA0LCAzMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICdyZ2JhKDI1NSwyNTUsMjU1LDAuMSknOwogICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KHBsYXQueCwgcGxhdC55LCBwbGF0LncsIDIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29uc3QgZ3JhZCA9IGN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudChwbGF0LngsIHBsYXQueSwgcGxhdC54LCBwbGF0LnkgKyBwbGF0LmgpOwogICAgICAgICAgICAgICAgZ3JhZC5hZGRDb2xvclN0b3AoMCwgdGhlbWUucGxhdGZvcm1EZXRhaWwpOwogICAgICAgICAgICAgICAgZ3JhZC5hZGRDb2xvclN0b3AoMSwgdGhlbWUucGxhdGZvcm1Db2xvcik7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZDsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5yb3VuZFJlY3QocGxhdC54LCBwbGF0LnksIHBsYXQudywgcGxhdC5oLCA0KTsKICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSB0aGVtZS5hY2NlbnRDb2xvcjsKICAgICAgICAgICAgICAgIGN0eC5saW5lV2lkdGggPSAxOwogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC41OwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpOwogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIC8vIC0tLSBEcmF3IENvbGxlY3RpYmxlcyAtLS0KICAgICAgICBzdGF0ZS5sZXZlbC5jb2xsZWN0aWJsZXMuZm9yRWFjaChjID0+IHsKICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShjLnggKyBjLncgLyAyLCBjLnkgKyBjLmggLyAyKTsKICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSAxLjAgKyBNYXRoLnNpbihEYXRlLm5vdygpIC8gMjAwKSAqIDAuMTsKICAgICAgICAgICAgY3R4LnNjYWxlKHNjYWxlLCBzY2FsZSk7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGVtZS5oYXphcmRDb2xvcjsKICAgICAgICAgICAgaWYgKHNldHRpbmdzLnJheVRyYWNpbmcpIHsKICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dDb2xvciA9IHRoZW1lLmhhemFyZENvbG9yOwogICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxNTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCB3ID0gYy53LCBoID0gYy5oOwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGNvbnN0IHRvcEN1cnZlSGVpZ2h0ID0gaCAqIDAuMzsKICAgICAgICAgICAgY3R4Lm1vdmVUbygwLCB0b3BDdXJ2ZUhlaWdodCk7CiAgICAgICAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKDAsIC1oICogMC4yLCAtdyAvIDIsIC1oICogMC4yLCAtdyAvIDIsIHRvcEN1cnZlSGVpZ2h0KTsKICAgICAgICAgICAgY3R4LmJlemllckN1cnZlVG8oLXcgLyAyLCBoICogMC40LCAwLCBoICogMC41LCAwLCBoICogMC41KTsKICAgICAgICAgICAgY3R4LmJlemllckN1cnZlVG8oMCwgaCAqIDAuNSwgdyAvIDIsIGggKiAwLjQsIHcgLyAyLCB0b3BDdXJ2ZUhlaWdodCk7CiAgICAgICAgICAgIGN0eC5iZXppZXJDdXJ2ZVRvKHcgLyAyLCAtaCAqIDAuMiwgMCwgLWggKiAwLjIsIDAsIHRvcEN1cnZlSGVpZ2h0KTsKICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgIH0pOwogICAgICAgIC8vIC0tLSBEcmF3IFByb2plY3RpbGVzIC0tLQogICAgICAgIHN0YXRlLmxldmVsLnByb2plY3RpbGVzLmZvckVhY2gocCA9PiB7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBwLmNvbG9yOwogICAgICAgICAgICBpZiAoc2V0dGluZ3MucmF5VHJhY2luZykgewogICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxMDsKICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dDb2xvciA9IHAuY29sb3I7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICBjdHguYXJjKHAueCwgcC55LCA2LCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgICB9KTsKICAgICAgICAvLyAtLS0gRHJhdyBFbmVtaWVzIC0tLQogICAgICAgIHN0YXRlLmxldmVsLmVuZW1pZXMuZm9yRWFjaChlbmVteSA9PiB7CiAgICAgICAgICAgIGlmIChlbmVteS5zdWJ0eXBlID09PSAndHVycmV0JykgewogICAgICAgICAgICAgICAgLy8gRHJhdyBUdXJyZXQKICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMxZTI5M2InOwogICAgICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGVuZW15LngsIGVuZW15LnkgKyBlbmVteS5oIC8gMiwgZW5lbXkudywgZW5lbXkuaCAvIDIpOwogICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShlbmVteS54ICsgZW5lbXkudyAvIDIsIGVuZW15LnkgKyBlbmVteS5oIC8gMik7CiAgICAgICAgICAgICAgICBjdHgucm90YXRlKERhdGUubm93KCkgLyAxMDAwKTsKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBlbmVteS5jb2xvcjsKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5yYXlUcmFjaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0NvbG9yID0gZW5lbXkuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxNTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCgtZW5lbXkudyAvIDIsIC1lbmVteS5oIC8gMiwgZW5lbXkudywgZW5lbXkuaCAvIDIpOwogICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChlbmVteS5zdWJ0eXBlID09PSAnZmx5ZXInKSB7CiAgICAgICAgICAgICAgICAvLyBVcGRhdGVkIEZseWluZyBFbmVteSBWaXN1YWxzIChNZWNoYW5pY2FsIEJhdC9Ecm9uZSkKICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gZW5lbXkueCArIGVuZW15LncgLyAyOwogICAgICAgICAgICAgICAgY29uc3QgY3kgPSBlbmVteS55ICsgZW5lbXkuaCAvIDI7CiAgICAgICAgICAgICAgICBjb25zdCBmbG9hdE9mZnNldCA9IE1hdGguc2luKERhdGUubm93KCkgLyAyMDApICogNTsKICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKGN4LCBjeSArIGZsb2F0T2Zmc2V0KTsKICAgICAgICAgICAgICAgIC8vIFdpbmdzIEFuaW1hdGlvbgogICAgICAgICAgICAgICAgY29uc3Qgd2luZ0ZsYXAgPSBNYXRoLnNpbihEYXRlLm5vdygpIC8gNTApOyAvLyBGYXN0IGZsYXAKICAgICAgICAgICAgICAgIC8vIExlZnQgV2luZwogICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIGN0eC5zY2FsZSgxLCAxICsgKHdpbmdGbGFwICogMC4yKSk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyM0NzU1NjknOwogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4Lm1vdmVUbygtMTAsIDApOwogICAgICAgICAgICAgICAgY3R4LmxpbmVUbygtZW5lbXkudyAvIDIgLSAxMCwgLTIwKTsKICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oLWVuZW15LncgLyAyLCAxMCk7CiAgICAgICAgICAgICAgICBjdHgubGluZVRvKC0xMCwgNSk7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gZW5lbXkuY29sb3I7CiAgICAgICAgICAgICAgICBjdHgubGluZVdpZHRoID0gMTsKICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgICAgICAvLyBSaWdodCBXaW5nCiAgICAgICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICAgICAgY3R4LnNjYWxlKC0xLCAxICsgKHdpbmdGbGFwICogMC4yKSk7IC8vIE1pcnJvcgogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjNDc1NTY5JzsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oLTEwLCAwKTsKICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oLWVuZW15LncgLyAyIC0gMTAsIC0yMCk7CiAgICAgICAgICAgICAgICBjdHgubGluZVRvKC1lbmVteS53IC8gMiwgMTApOwogICAgICAgICAgICAgICAgY3R4LmxpbmVUbygtMTAsIDUpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGVuZW15LmNvbG9yOwogICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7CiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICAgICAgLy8gTWFpbiBCb2R5CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyMwZjE3MmEnOwogICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgY3R4LmVsbGlwc2UoMCwgMCwgMTUsIDEwLCAwLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgLy8gR2xvd2luZyBFeWUKICAgICAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBlbmVteS5jb2xvcjsKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5yYXlUcmFjaW5nKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0NvbG9yID0gZW5lbXkuY29sb3I7CiAgICAgICAgICAgICAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAxNTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5hcmMoMCwgMCwgNiwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICAgICAgY3R4LmZpbGwoKTsKICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gMDsKICAgICAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBEcmF3IFBhdHJvbGxlcgogICAgICAgICAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICAgICAgICAgIGNvbnN0IGN4ID0gZW5lbXkueCArIGVuZW15LncgLyAyOwogICAgICAgICAgICAgICAgY29uc3QgY3kgPSBlbmVteS55ICsgZW5lbXkuaCAvIDI7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gZW5lbXkuY29sb3I7CiAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgICAgICBjdHguYXJjKGN4LCBjeSwgZW5lbXkudyAvIDIsIE1hdGguUEksIDApOwogICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhjeCArIGVuZW15LncgLyAyLCBjeSArIGVuZW15LmggLyAyKTsKICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggLSBlbmVteS53IC8gMiwgY3kgKyBlbmVteS5oIC8gMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjMDAwJzsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oY3ggLSAxMCArIChpICogMTApLCBjeSAtIDEwKTsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGN4IC0gNSArIChpICogMTApLCBjeSAtIDI1KTsKICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKGN4ICsgKGkgKiAxMCksIGN5IC0gMTApOwogICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjdHgucmVzdG9yZSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgLy8gLS0tIEJvc3MgLS0tCiAgICAgICAgaWYgKHN0YXRlLmxldmVsLmJvc3MgJiYgc3RhdGUubGV2ZWwuYm9zcy5oZWFsdGggPiAwKSB7CiAgICAgICAgICAgIGNvbnN0IGIgPSBzdGF0ZS5sZXZlbC5ib3NzOwogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gYi5jb2xvcjsKICAgICAgICAgICAgaWYgKHNldHRpbmdzLnJheVRyYWNpbmcpIHsKICAgICAgICAgICAgICAgIGN0eC5zaGFkb3dCbHVyID0gNTA7CiAgICAgICAgICAgICAgICBjdHguc2hhZG93Q29sb3IgPSBiLmNvbG9yOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN0eC5maWxsUmVjdChiLngsIGIueSwgYi53LCBiLmgpOwogICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDA7CiAgICAgICAgICAgIGNvbnN0IGhwUGVyY2VudCA9IGIuaGVhbHRoIC8gYi5tYXhIZWFsdGg7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSAnIzQ1MGEwYSc7CiAgICAgICAgICAgIGN0eC5maWxsUmVjdChiLngsIGIueSAtIDQwLCBiLncsIDEyKTsKICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9ICcjZGMyNjI2JzsKICAgICAgICAgICAgY3R4LmZpbGxSZWN0KGIueCwgYi55IC0gNDAsIGIudyAqIGhwUGVyY2VudCwgMTIpOwogICAgICAgIH0KICAgICAgICAvLyAtLS0gRHJhdyBQbGF5ZXIgLS0tCiAgICAgICAgY29uc3QgcCA9IHN0YXRlLnBsYXllcjsKICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgIC8vIEludmluY2liaWxpdHkgRmxhc2gKICAgICAgICBpZiAocC5pbnZpbmNpYmxlVGltZXIgPiAwKSB7CiAgICAgICAgICAgIC8vIEZsYXNoIGV2ZXJ5IDAuMXMKICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IoRGF0ZS5ub3coKSAvIDEwMCkgJSAyID09PSAwKSB7CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjM7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKHBsYXllckltYWdlLmN1cnJlbnQgJiYgcGxheWVySW1hZ2UuY3VycmVudC5jb21wbGV0ZSAmJiBwbGF5ZXJJbWFnZS5jdXJyZW50Lm5hdHVyYWxXaWR0aCA+IDApIHsKICAgICAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGN0eC5pbWFnZVNtb290aGluZ1F1YWxpdHkgPSAnaGlnaCc7CiAgICAgICAgICAgIGlmICghcC5mYWNpbmdSaWdodCkgewogICAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZShwLnggKyBwLncsIHAueSk7CiAgICAgICAgICAgICAgICBjdHguc2NhbGUoLTEsIDEpOwogICAgICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShwbGF5ZXJJbWFnZS5jdXJyZW50LCAwLCAwLCBwLncsIHAuaCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjdHguZHJhd0ltYWdlKHBsYXllckltYWdlLmN1cnJlbnQsIHAueCwgcC55LCBwLncsIHAuaCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBwLmNvbG9yOwogICAgICAgICAgICBjdHguZmlsbFJlY3QocC54LCBwLnksIHAudywgcC5oKTsKICAgICAgICB9CiAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAvLyAtLS0gUGFydGljbGVzIC0tLQogICAgICAgIHN0YXRlLnBhcnRpY2xlcy5mb3JFYWNoKHB0ID0+IHsKICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gcHQubGlmZTsKICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHB0LmNvbG9yOwogICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgICAgICAgIGN0eC5hcmMocHQueCwgcHQueSwgcHQuc2l6ZSwgMCwgTWF0aC5QSSAqIDIpOwogICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAxLjA7CiAgICAgICAgfSk7CiAgICAgICAgLy8gLS0tIEV4aXQgUG9ydGFsIC0tLQogICAgICAgIGNvbnN0IGVuZCA9IHN0YXRlLmxldmVsLmVuZFBvczsKICAgICAgICBpZiAoc2V0dGluZ3MucmF5VHJhY2luZykgewogICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IDQwOwogICAgICAgICAgICBjdHguc2hhZG93Q29sb3IgPSB0aGVtZS5hY2NlbnRDb2xvcjsKICAgICAgICB9CiAgICAgICAgY29uc3QgdCA9IERhdGUubm93KCkgLyAxMDAwOwogICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHRoZW1lLmFjY2VudENvbG9yOwogICAgICAgIGN0eC5saW5lV2lkdGggPSAzOwogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICBjdHguYXJjKGVuZC54LCBlbmQueSwgNDAgKyBNYXRoLnNpbih0KSAqIDUsIDAsIE1hdGguUEkgKiAyKTsKICAgICAgICBjdHguc3Ryb2tlKCk7CiAgICAgICAgY3R4LnNoYWRvd0JsdXIgPSAwOwogICAgICAgIC8vIC0tLSBMaWdodGluZy9WaWduZXR0ZSAtLS0KICAgICAgICBpZiAoc2V0dGluZ3MucmF5VHJhY2luZykgewogICAgICAgICAgICBjb25zdCBncmFkID0gY3R4LmNyZWF0ZVJhZGlhbEdyYWRpZW50KHN0YXRlLnBsYXllci54ICsgcC53IC8gMiwgc3RhdGUucGxheWVyLnkgKyBwLmggLyAyLCAxMDAsIHN0YXRlLnBsYXllci54ICsgcC53IC8gMiwgc3RhdGUucGxheWVyLnkgKyBwLmggLyAyLCB3aW5kb3cuaW5uZXJIZWlnaHQpOwogICAgICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgwLCAncmdiYSgwLDAsMCwwKScpOwogICAgICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgxLCAncmdiYSgwLDAsMCwwLjcpJyk7CiAgICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBncmFkOwogICAgICAgICAgICBjdHguZmlsbFJlY3Qoc3RhdGUuY2FtZXJhLngsIHN0YXRlLmNhbWVyYS55LCB3aWR0aCwgaGVpZ2h0KTsKICAgICAgICB9CiAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgIH07CiAgICBjb25zdCBkcmF3QmFja2dyb3VuZCA9IChjdHgsIHdpZHRoLCBoZWlnaHQsIHRoZW1lKSA9PiB7CiAgICAgICAgY29uc3QgeyBjYW1lcmEsIGJhY2tncm91bmRPZmZzZXQgfSA9IGdhbWVTdGF0ZS5jdXJyZW50OwogICAgICAgIGNvbnN0IGdyYWQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgMCwgaGVpZ2h0KTsKICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgwLCB0aGVtZS5iYWNrZ3JvdW5kVG9wKTsKICAgICAgICBncmFkLmFkZENvbG9yU3RvcCgxLCB0aGVtZS5iYWNrZ3JvdW5kQm90dG9tKTsKICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZDsKICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgICAgY3R4LnNhdmUoKTsKICAgICAgICBjb25zdCBwMSA9IDAuMTU7CiAgICAgICAgY29uc3Qgb2ZmMSA9IC0oY2FtZXJhLnggKiBwMSkgJSB3aWR0aDsKICAgICAgICBjb25zdCB5T2ZmMSA9IC0oY2FtZXJhLnkgKiBwMSAqIDAuMikgKyBoZWlnaHQgLyAyOwogICAgICAgIGN0eC5maWxsU3R5bGUgPSB0aGVtZS5wbGF0Zm9ybUNvbG9yOwogICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IDAuNTsKICAgICAgICBjb25zdCBkcmF3UGlsbGFycyA9IChvZmZzZXQpID0+IHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IHggPSBvZmZzZXQgKyAoaSAqICh3aWR0aCAvIDYpKTsKICAgICAgICAgICAgICAgIGNvbnN0IHcgPSA2MCArIE1hdGguc2luKGkgKiA5OSkgKiAzMDsKICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCAtNTAwLCB3LCBoZWlnaHQgKiAyKTsKICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7CiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhlbWUuYWNjZW50Q29sb3I7CiAgICAgICAgICAgICAgICBjdHguZ2xvYmFsQWxwaGEgPSAwLjE7CiAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoeCArIDEwLCB5T2ZmMSArIE1hdGguc2luKGkpICogMTAwLCA1LCAyMDApOwogICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgZHJhd1BpbGxhcnMob2ZmMSk7CiAgICAgICAgZHJhd1BpbGxhcnMob2ZmMSArIHdpZHRoKTsKICAgICAgICBkcmF3UGlsbGFycyhvZmYxIC0gd2lkdGgpOwogICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgaWYgKHNldHRpbmdzLnBhcnRpY2xlcykgewogICAgICAgICAgICBjdHguc2F2ZSgpOwogICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhlbWUuYWNjZW50Q29sb3I7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDA7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgbXggPSAoaSAqIDIwMCArIGJhY2tncm91bmRPZmZzZXQgKiAwLjUpICUgKHdpZHRoICsgMjAwKSAtIDEwMDsKICAgICAgICAgICAgICAgIGNvbnN0IG15ID0gKGkgKiAxMzcpICUgaGVpZ2h0OwogICAgICAgICAgICAgICAgY29uc3Qgc2l6ZSA9IChpICUgMykgKyAxOwogICAgICAgICAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gMC4xICsgKE1hdGguc2luKGkgKyBiYWNrZ3JvdW5kT2Zmc2V0ICogMC4wMSkgKiAwLjA1KTsKICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgICAgICAgICAgIGN0eC5hcmMobXgsIG15LCBzaXplLCAwLCBNYXRoLlBJICogMik7CiAgICAgICAgICAgICAgICBjdHguZmlsbCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IGxvb3AgPSB1c2VDYWxsYmFjaygodGltZSkgPT4gewogICAgICAgIGlmICghY2FudmFzUmVmLmN1cnJlbnQpCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICBjb25zdCBjdHggPSBjYW52YXNSZWYuY3VycmVudC5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIGlmICghY3R4KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgY29uc3QgZHQgPSAodGltZSAtIGdhbWVTdGF0ZS5jdXJyZW50Lmxhc3RUaW1lKSAvIDE2LjY3OwogICAgICAgIGdhbWVTdGF0ZS5jdXJyZW50Lmxhc3RUaW1lID0gdGltZTsKICAgICAgICB1cGRhdGUoZHQpOwogICAgICAgIGlmIChoZWFsdGggPD0gMCAmJiAhZ2FtZU92ZXIpCiAgICAgICAgICAgIHNldEdhbWVPdmVyKHRydWUpOwogICAgICAgIGRyYXcoY3R4KTsKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUobG9vcCk7CiAgICB9LCBbcGF1c2VkLCBsZXZlbEluZGV4LCBzZXR0aW5ncywgaGVhbHRoLCBnYW1lT3Zlciwgc2hvd1Rlcm1pbmFsXSk7CiAgICB1c2VFZmZlY3QoKCkgPT4gewogICAgICAgIGNvbnN0IGFuaW1hdGlvbklkID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGxvb3ApOwogICAgICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZSkgPT4gewogICAgICAgICAgICAvLyBUb2dnbGUgVGVybWluYWwKICAgICAgICAgICAgaWYgKChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5KSAmJiBlLmtleS50b0xvd2VyQ2FzZSgpID09PSAnbCcpIHsKICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgIHNldFNob3dUZXJtaW5hbChwcmV2ID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gIXByZXY7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgaW5wdXRzIGlmIG9wZW5pbmcgc28gd2UgZG9uJ3Qga2VlcCBtb3ZpbmcKICAgICAgICAgICAgICAgICAgICBpZiAobmV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQua2V5cyA9IHt9OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXh0OwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNob3dUZXJtaW5hbCkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgZ2FtZVN0YXRlLmN1cnJlbnQua2V5c1tlLmtleV0gPSB0cnVlOwogICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKQogICAgICAgICAgICAgICAgc2V0UGF1c2VkKHAgPT4gIXApOwogICAgICAgIH07CiAgICAgICAgY29uc3QgaGFuZGxlS2V5VXAgPSAoZSkgPT4gZ2FtZVN0YXRlLmN1cnJlbnQua2V5c1tlLmtleV0gPSBmYWxzZTsKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pOwogICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUtleVVwKTsKICAgICAgICByZXR1cm4gKCkgPT4gewogICAgICAgICAgICBjYW5jZWxBbmltYXRpb25GcmFtZShhbmltYXRpb25JZCk7CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bik7CiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUtleVVwKTsKICAgICAgICB9OwogICAgfSwgW2xvb3AsIHNob3dUZXJtaW5hbF0pOwogICAgaWYgKGdhbWVPdmVyKSB7CiAgICAgICAgcmV0dXJuIChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZpeGVkIGluc2V0LTAgYmctYmxhY2sgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgdGV4dC13aGl0ZSB6LTUwIGFuaW1hdGUtZmFkZS1pbiIsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWNlbnRlciBwLTggYm9yZGVyIGJvcmRlci1yZWQtOTAwLzUwIGJnLXJlZC05NTAvMjAgcm91bmRlZC14bCBiYWNrZHJvcC1ibHVyLXNtIiwgY2hpbGRyZW46IFtfanN4KCJoMSIsIHsgY2xhc3NOYW1lOiAidGV4dC02eGwgZm9udC1jaW56ZWwgdGV4dC1yZWQtNjAwIG1iLTQgZHJvcC1zaGFkb3ctWzBfMF8xMHB4X3JnYmEoMjIwLDM4LDM4LDAuNSldIiwgY2hpbGRyZW46ICJZT1UgRElFRCIgfSksIF9qc3goInAiLCB7IGNsYXNzTmFtZTogIm1iLTggb3BhY2l0eS03MCBmb250LWNpbnplbCB0ZXh0LXhsIiwgY2hpbGRyZW46ICJUaGUgaW5rIGhhcyBkcmllZCBvbiB5b3VyIHN0b3J5LiIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTQganVzdGlmeS1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlUmVzdGFydCwgY2xhc3NOYW1lOiAicHgtOCBweS0zIGJnLXdoaXRlIHRleHQtYmxhY2sgZm9udC1ib2xkIHJvdW5kZWQgaG92ZXI6YmctZ3JheS0yMDAgdHJhbnNpdGlvbi10cmFuc2Zvcm0gaG92ZXI6c2NhbGUtMTA1IiwgY2hpbGRyZW46ICJUUlkgQUdBSU4iIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6IG9uRXhpdCwgY2xhc3NOYW1lOiAicHgtOCBweS0zIGJvcmRlciBib3JkZXItd2hpdGUvMzAgdGV4dC13aGl0ZSBmb250LWJvbGQgcm91bmRlZCBob3ZlcjpiZy13aGl0ZS8xMCB0cmFuc2l0aW9uLWNvbG9ycyIsIGNoaWxkcmVuOiAiR0lWRSBVUCIgfSldIH0pXSB9KSB9KSk7CiAgICB9CiAgICByZXR1cm4gKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInJlbGF0aXZlIHctZnVsbCBoLXNjcmVlbiBiZy1uZXV0cmFsLTkwMCBvdmVyZmxvdy1oaWRkZW4gY3Vyc29yLW5vbmUiLCBjaGlsZHJlbjogW19qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIHRvcC00IGxlZnQtNCB6LTEwIGZsZXggZ2FwLTQgdGV4dC13aGl0ZSIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiYmctYmxhY2svNTAgcC00IHJvdW5kZWQtbGcgYmFja2Ryb3AtYmx1ci1zbSBib3JkZXIgYm9yZGVyLXdoaXRlLzEwIHNoYWRvdy1sZyIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1zbSB1cHBlcmNhc2UgdHJhY2tpbmctd2lkZXN0IG9wYWNpdHktNTAgbWItMSBmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChTcGFya2xlcywgeyBzaXplOiAxMiB9KSwgIiBWaXRhbGl0eSJdIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIiLCBjaGlsZHJlbjogWy4uLkFycmF5KDUpXS5tYXAoKF8sIGkpID0+IChfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYHctNSBoLTUgdHJhbnNpdGlvbi1hbGwgZHVyYXRpb24tMzAwIHRyYW5zZm9ybSAke2kgPCBoZWFsdGggPyAnc2NhbGUtMTAwJyA6ICdzY2FsZS03NSBvcGFjaXR5LTMwJ31gLCBjaGlsZHJlbjogX2pzeCgic3ZnIiwgeyB2aWV3Qm94OiAiMCAwIDI0IDI0IiwgZmlsbDogaSA8IGhlYWx0aCA/ICIjZmI3MTg1IiA6ICJub25lIiwgc3Ryb2tlOiAiI2ZmZiIsIGNsYXNzTmFtZTogInctZnVsbCBoLWZ1bGwgZHJvcC1zaGFkb3ctbWQiLCBjaGlsZHJlbjogX2pzeCgicGF0aCIsIHsgZDogIk0yMC44NCA0LjYxYTUuNSA1LjUgMCAwIDAtNy43OCAwTDEyIDUuNjdsLTEuMDYtMS4wNmE1LjUgNS41IDAgMCAwLTcuNzggNy43OGwxLjA2IDEuMDZMMTIgMjEuMjNsNy43OC03Ljc4IDEuMDYtMS4wNmE1LjUgNS41IDAgMCAwIDAtNy43OHoiIH0pIH0pIH0sIGkpKSkgfSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJiZy1ibGFjay81MCBwLTQgcm91bmRlZC1sZyBiYWNrZHJvcC1ibHVyLXNtIGJvcmRlciBib3JkZXItd2hpdGUvMTAgc2hhZG93LWxnIiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtc20gdXBwZXJjYXNlIHRyYWNraW5nLXdpZGVzdCBvcGFjaXR5LTUwIG1iLTEiLCBjaGlsZHJlbjogIkNocm9uaWNsZSIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZvbnQtY2luemVsIHRleHQteGwgdGV4dC13aGl0ZSIsIGNoaWxkcmVuOiBbZ2FtZVN0YXRlLmN1cnJlbnQubGV2ZWw/Lm5hbWUgfHwgbGV2ZWxJbmRleCwgX2pzeHMoInNwYW4iLCB7IGNsYXNzTmFtZTogInRleHQteHMgb3BhY2l0eS01MCBtbC0yIiwgY2hpbGRyZW46IFsiLyAiLCBUT1RBTF9MRVZFTFNdIH0pXSB9KV0gfSldIH0pLCBzaG93VGVybWluYWwgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIHRvcC0wIGxlZnQtMCB3LWZ1bGwgYmctYmxhY2svOTAgdGV4dC1ncmVlbi00MDAgZm9udC1tb25vIHRleHQtc20gei01MCBib3JkZXItYiBib3JkZXItZ3JlZW4tOTAwIHNoYWRvdy14bCBwLTQgYW5pbWF0ZS1zbGlkZS1kb3duIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiBtYi0yIGJvcmRlci1iIGJvcmRlci1ncmVlbi05MDAvNTAgcGItMiIsIGNoaWxkcmVuOiBbX2pzeChUZXJtaW5hbCwgeyBzaXplOiAxNiB9KSwgX2pzeCgic3BhbiIsIHsgY2xhc3NOYW1lOiAiZm9udC1ib2xkIiwgY2hpbGRyZW46ICJGTE9VTkRFUl9ERVZfQ09OU09MRSIgfSldIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogIm1heC1oLTQwIG92ZXJmbG93LXktYXV0byBtYi0yIHNwYWNlLXktMSBvcGFjaXR5LTgwIiwgY2hpbGRyZW46IHRlcm1Mb2cubWFwKChsb2csIGkpID0+IF9qc3goImRpdiIsIHsgY2hpbGRyZW46IGxvZyB9LCBpKSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZ2FwLTIgaXRlbXMtY2VudGVyIiwgY2hpbGRyZW46IFtfanN4KCJzcGFuIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LWdyZWVuLTYwMCIsIGNoaWxkcmVuOiAnPicgfSksIF9qc3goImlucHV0IiwgeyByZWY6IHRlcm1pbmFsSW5wdXRSZWYsIHR5cGU6ICJ0ZXh0IiwgdmFsdWU6IHRlcm1JbnB1dCwgb25DaGFuZ2U6IChlKSA9PiBzZXRUZXJtSW5wdXQoZS50YXJnZXQudmFsdWUpLCBvbktleURvd246IChlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFByZXZlbnQgZ2FtZSBrZXlzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVDb21tYW5kKHRlcm1JbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgY2xhc3NOYW1lOiAiYmctdHJhbnNwYXJlbnQgYm9yZGVyLW5vbmUgb3V0bGluZS1ub25lIGZsZXgtMSB0ZXh0LWdyZWVuLTQwMCBwbGFjZWhvbGRlci1ncmVlbi05MDAiLCBwbGFjZWhvbGRlcjogIkVudGVyIGNvbW1hbmQuLi4iIH0pXSB9KV0gfSkpLCBwYXVzZWQgJiYgKF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgYmctYmxhY2svODAgYmFja2Ryb3AtYmx1ci1tZCB6LTQwIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGFuaW1hdGUtZmFkZS1pbiIsIGNoaWxkcmVuOiBbX2pzeCgiaDIiLCB7IGNsYXNzTmFtZTogInRleHQtNXhsIGZvbnQtY2luemVsIHRleHQtd2hpdGUgbWItMTAgdHJhY2tpbmctd2lkZXIiLCBjaGlsZHJlbjogIlBBVVNFRCIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggZmxleC1jb2wgZ2FwLTQgdy02NCIsIGNoaWxkcmVuOiBbX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiAoKSA9PiBzZXRQYXVzZWQoZmFsc2UpLCBjbGFzc05hbWU6ICJweC02IHB5LTQgYmctd2hpdGUgdGV4dC1ibGFjayBob3ZlcjpzY2FsZS0xMDUgdHJhbnNpdGlvbi1hbGwgZm9udC1ib2xkIHRyYWNraW5nLXdpZGVzdCIsIGNoaWxkcmVuOiAiUkVTVU1FIiB9KSwgX2pzeCgiYnV0dG9uIiwgeyBvbkNsaWNrOiBoYW5kbGVSZXN0YXJ0LCBjbGFzc05hbWU6ICJweC02IHB5LTQgYm9yZGVyIGJvcmRlci13aGl0ZS8yMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLXdoaXRlLzEwIHRyYW5zaXRpb24tYWxsIHRyYWNraW5nLXdpZGVzdCIsIGNoaWxkcmVuOiAiUkVTVEFSVCBMRVZFTCIgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogb25FeGl0LCBjbGFzc05hbWU6ICJweC02IHB5LTQgYm9yZGVyIGJvcmRlci1yZWQtNTAwLzUwIHRleHQtcmVkLTQwMCBob3ZlcjpiZy1yZWQtOTUwLzMwIHRyYW5zaXRpb24tYWxsIHRyYWNraW5nLXdpZGVzdCIsIGNoaWxkcmVuOiAiRVhJVCBUTyBNRU5VIiB9KV0gfSldIH0pKSwgX2pzeCgiY2FudmFzIiwgeyByZWY6IGNhbnZhc1JlZiwgY2xhc3NOYW1lOiAiYmxvY2sgdy1mdWxsIGgtZnVsbCIgfSksIGxvYWRpbmcgJiYgKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBiZy1ibGFjayB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUiLCBjaGlsZHJlbjogX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy0xMiBoLTEyIGJvcmRlci00IGJvcmRlci13aGl0ZSBib3JkZXItdC10cmFuc3BhcmVudCByb3VuZGVkLWZ1bGwgYW5pbWF0ZS1zcGluIG1iLTQiIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZvbnQtY2luemVsIHRleHQtMnhsIHRyYWNraW5nLXdpZGVzdCBhbmltYXRlLXB1bHNlIiwgY2hpbGRyZW46ICJMT0FESU5HIiB9KV0gfSkgfSkpXSB9KSk7Cn07Cg==","@/components/MainMenu":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBQbGF5LCBTZXR0aW5ncywgTW9uaXRvciwgQ3B1IH0gZnJvbSAnbHVjaWRlLXJlYWN0JzsKaW1wb3J0IHsgRkxPVU5ERVJfTE9HT19VUkwgfSBmcm9tICdAL2NvbnN0YW50cyc7CmV4cG9ydCBjb25zdCBNYWluTWVudSA9ICh7IG9uU3RhcnQsIHNldHRpbmdzLCBzZXRTZXR0aW5ncyB9KSA9PiB7CiAgICBjb25zdCBbc2hvd1NldHRpbmdzLCBzZXRTaG93U2V0dGluZ3NdID0gdXNlU3RhdGUoZmFsc2UpOwogICAgY29uc3QgdG9nZ2xlU2V0dGluZyA9IChrZXkpID0+IHsKICAgICAgICBzZXRTZXR0aW5ncyh7IC4uLnNldHRpbmdzLCBba2V5XTogIXNldHRpbmdzW2tleV0gfSk7CiAgICB9OwogICAgcmV0dXJuIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJyZWxhdGl2ZSB3LWZ1bGwgaC1zY3JlZW4gYmctYmxhY2sgdGV4dC13aGl0ZSBvdmVyZmxvdy1oaWRkZW4gZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAiYWJzb2x1dGUgaW5zZXQtMCBvcGFjaXR5LTIwIGJnLVt1cmwoJ2h0dHBzOi8vaW1hZ2VzLnVuc3BsYXNoLmNvbS9waG90by0xNTE4NzA5MjY4ODA1LTRlOTA0MmFmOWYyMz9xPTgwJnc9MjU2OCZhdXRvPWZvcm1hdCZmaXQ9Y3JvcCcpXSBiZy1jb3ZlciBiZy1jZW50ZXIgZmlsdGVyIGdyYXlzY2FsZSBjb250cmFzdC0xNTAiIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImFic29sdXRlIGluc2V0LTAgYmctZ3JhZGllbnQtdG8tdCBmcm9tLWJsYWNrIHZpYS10cmFuc3BhcmVudCB0by1ibGFjayIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInotMTAgdGV4dC1jZW50ZXIgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgYW5pbWF0ZS1mYWRlLWluIiwgY2hpbGRyZW46IFtfanN4KCJpbWciLCB7IHNyYzogRkxPVU5ERVJfTE9HT19VUkwsIGFsdDogIkZsb3VuZGVyIExvZ28iLCBjbGFzc05hbWU6ICJ3LTMyIGgtMzIgbWItNiBkcm9wLXNoYWRvdy1bMF8wXzE1cHhfcmdiYSgyNTUsMjU1LDI1NSwwLjUpXSIgfSksIF9qc3goImgxIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTZ4bCBtZDp0ZXh0LTh4bCBmb250LWNpbnplbCBtYi0yIHRyYWNraW5nLXRpZ2h0ZXIiLCBjaGlsZHJlbjogIlRIRSBGTE9VTkRFUiIgfSksIF9qc3goImgyIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhsIG1kOnRleHQtM3hsIGZvbnQtbGlnaHQgb3BhY2l0eS03MCBtYi0xMiB0cmFja2luZy1bMC41ZW1dIHVwcGVyY2FzZSIsIGNoaWxkcmVuOiAiQ2hyb25pY2xlcyIgfSksICFzaG93U2V0dGluZ3MgPyAoX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBmbGV4LWNvbCBnYXAtNCB3LTY0IiwgY2hpbGRyZW46IFtfanN4cygiYnV0dG9uIiwgeyBvbkNsaWNrOiBvblN0YXJ0LCBjbGFzc05hbWU6ICJncm91cCByZWxhdGl2ZSBweC04IHB5LTQgYmctd2hpdGUgdGV4dC1ibGFjayBmb250LWJvbGQgdGV4dC1sZyBvdmVyZmxvdy1oaWRkZW4gdHJhbnNpdGlvbi1hbGwgaG92ZXI6c2NhbGUtMTA1IiwgY2hpbGRyZW46IFtfanN4cygic3BhbiIsIHsgY2xhc3NOYW1lOiAicmVsYXRpdmUgei0xMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBnYXAtMiIsIGNoaWxkcmVuOiBbX2pzeChQbGF5LCB7IHNpemU6IDIwIH0pLCAiIFNUQVJUIEdBTUUiXSB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBpbnNldC0wIGJnLWJsdWUtNDAwIHRyYW5zZm9ybSBzY2FsZS14LTAgZ3JvdXAtaG92ZXI6c2NhbGUteC0xMDAgdHJhbnNpdGlvbi10cmFuc2Zvcm0gb3JpZ2luLWxlZnQgZHVyYXRpb24tMzAwIG9wYWNpdHktMjAiIH0pXSB9KSwgX2pzeHMoImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0U2hvd1NldHRpbmdzKHRydWUpLCBjbGFzc05hbWU6ICJweC04IHB5LTQgYm9yZGVyIGJvcmRlci13aGl0ZS8yMCB0ZXh0LXdoaXRlIGhvdmVyOmJnLXdoaXRlLzEwIHRyYW5zaXRpb24tYWxsIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGdhcC0yIiwgY2hpbGRyZW46IFtfanN4KFNldHRpbmdzLCB7IHNpemU6IDE4IH0pLCAiIFNFVFRJTkdTIl0gfSldIH0pKSA6IChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJ3LTk2IGJnLWJsYWNrLzgwIGJvcmRlciBib3JkZXItd2hpdGUvMTAgcC04IGJhY2tkcm9wLWJsdXItbWQgcm91bmRlZC1sZyIsIGNoaWxkcmVuOiBbX2pzeCgiaDMiLCB7IGNsYXNzTmFtZTogInRleHQtMnhsIGZvbnQtY2luemVsIG1iLTYgYm9yZGVyLWIgYm9yZGVyLXdoaXRlLzEwIHBiLTQiLCBjaGlsZHJlbjogIlZpc3VhbCBTZXR0aW5ncyIgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInNwYWNlLXktNiIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIGdyb3VwIiwgY2hpbGRyZW46IFtfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMyIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6IGBwLTIgcm91bmRlZCAke3NldHRpbmdzLnJheVRyYWNpbmcgPyAnYmctYmx1ZS01MDAvMjAgdGV4dC1ibHVlLTQwMCcgOiAnYmctd2hpdGUvNSB0ZXh0LWdyYXktNDAwJ31gLCBjaGlsZHJlbjogX2pzeChDcHUsIHsgc2l6ZTogMjQgfSkgfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQtbGVmdCIsIGNoaWxkcmVuOiBbX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJmb250LWJvbGQiLCBjaGlsZHJlbjogIlJheSBUcmFjaW5nIiB9KSwgX2pzeCgiZGl2IiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhzIHRleHQtZ3JheS00MDAiLCBjaGlsZHJlbjogIlJETkEgMiAvIFJUWCAvIE0tU2VyaWVzIiB9KV0gfSldIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHRvZ2dsZVNldHRpbmcoJ3JheVRyYWNpbmcnKSwgY2xhc3NOYW1lOiBgdy0xMiBoLTYgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tY29sb3JzIHJlbGF0aXZlICR7c2V0dGluZ3MucmF5VHJhY2luZyA/ICdiZy1ibHVlLTUwMCcgOiAnYmctZ3JheS03MDAnfWAsIGNoaWxkcmVuOiBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYGFic29sdXRlIHRvcC0xIHctNCBoLTQgYmctd2hpdGUgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsICR7c2V0dGluZ3MucmF5VHJhY2luZyA/ICdsZWZ0LTcnIDogJ2xlZnQtMSd9YCB9KSB9KV0gfSksIF9qc3hzKCJkaXYiLCB7IGNsYXNzTmFtZTogImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktYmV0d2VlbiBncm91cCIsIGNoaWxkcmVuOiBbX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTMiLCBjaGlsZHJlbjogW19qc3goImRpdiIsIHsgY2xhc3NOYW1lOiBgcC0yIHJvdW5kZWQgJHtzZXR0aW5ncy5wYXJ0aWNsZXMgPyAnYmctcHVycGxlLTUwMC8yMCB0ZXh0LXB1cnBsZS00MDAnIDogJ2JnLXdoaXRlLzUgdGV4dC1ncmF5LTQwMCd9YCwgY2hpbGRyZW46IF9qc3goTW9uaXRvciwgeyBzaXplOiAyNCB9KSB9KSwgX2pzeHMoImRpdiIsIHsgY2xhc3NOYW1lOiAidGV4dC1sZWZ0IiwgY2hpbGRyZW46IFtfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogImZvbnQtYm9sZCIsIGNoaWxkcmVuOiAiUGFydGljbGVzICYgRlgiIH0pLCBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogInRleHQteHMgdGV4dC1ncmF5LTQwMCIsIGNoaWxkcmVuOiAiSGlnaCBGaWRlbGl0eSBBdG1vc3BoZXJlIiB9KV0gfSldIH0pLCBfanN4KCJidXR0b24iLCB7IG9uQ2xpY2s6ICgpID0+IHRvZ2dsZVNldHRpbmcoJ3BhcnRpY2xlcycpLCBjbGFzc05hbWU6IGB3LTEyIGgtNiByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1jb2xvcnMgcmVsYXRpdmUgJHtzZXR0aW5ncy5wYXJ0aWNsZXMgPyAnYmctcHVycGxlLTUwMCcgOiAnYmctZ3JheS03MDAnfWAsIGNoaWxkcmVuOiBfanN4KCJkaXYiLCB7IGNsYXNzTmFtZTogYGFic29sdXRlIHRvcC0xIHctNCBoLTQgYmctd2hpdGUgcm91bmRlZC1mdWxsIHRyYW5zaXRpb24tYWxsICR7c2V0dGluZ3MucGFydGljbGVzID8gJ2xlZnQtNycgOiAnbGVmdC0xJ31gIH0pIH0pXSB9KV0gfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogKCkgPT4gc2V0U2hvd1NldHRpbmdzKGZhbHNlKSwgY2xhc3NOYW1lOiAibXQtOCB3LWZ1bGwgcHktMyBiZy13aGl0ZS8xMCBob3ZlcjpiZy13aGl0ZS8yMCB0cmFuc2l0aW9uLWFsbCBmb250LWJvbGQiLCBjaGlsZHJlbjogIkJBQ0siIH0pXSB9KSldIH0pLCBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJhYnNvbHV0ZSBib3R0b20tOCB0ZXh0LXdoaXRlLzMwIHRleHQteHMgZmxleCBnYXAtNCIsIGNoaWxkcmVuOiBbX2pzeCgic3BhbiIsIHsgY2hpbGRyZW46ICJ2MS4wLjAiIH0pLCBfanN4KCJzcGFuIiwgeyBjaGlsZHJlbjogIlx1MjAyMiIgfSksIF9qc3goInNwYW4iLCB7IGNoaWxkcmVuOiAiTWFkZSBmb3IgRmxvdW5kZXIubmV3cyIgfSldIH0pXSB9KSk7Cn07Cg==","@/App":"data:application/javascript;base64,aW1wb3J0IHsganN4IGFzIF9qc3gsIGpzeHMgYXMgX2pzeHMgfSBmcm9tICJyZWFjdC9qc3gtcnVudGltZSI7CmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnOwppbXBvcnQgeyBNYWluTWVudSB9IGZyb20gJ0AvY29tcG9uZW50cy9NYWluTWVudSc7CmltcG9ydCB7IEdhbWUgfSBmcm9tICdAL2NvbXBvbmVudHMvR2FtZSc7CmZ1bmN0aW9uIEFwcCgpIHsKICAgIGNvbnN0IFt2aWV3LCBzZXRWaWV3XSA9IHVzZVN0YXRlKCdtZW51Jyk7CiAgICBjb25zdCBbc2V0dGluZ3MsIHNldFNldHRpbmdzXSA9IHVzZVN0YXRlKHsKICAgICAgICByYXlUcmFjaW5nOiB0cnVlLCAvLyBEZWZhdWx0IHRvIG9uIGZvciB0aGUgd293IGZhY3RvcgogICAgICAgIHBhcnRpY2xlczogdHJ1ZSwKICAgICAgICBtdXNpY1ZvbHVtZTogMC41LAogICAgICAgIHNmeFZvbHVtZTogMC41CiAgICB9KTsKICAgIGNvbnN0IGhhbmRsZVN0YXJ0ID0gKCkgPT4gc2V0VmlldygnZ2FtZScpOwogICAgY29uc3QgaGFuZGxlRXhpdCA9ICgpID0+IHNldFZpZXcoJ21lbnUnKTsKICAgIGNvbnN0IGhhbmRsZVdpbiA9ICgpID0+IHNldFZpZXcoJ3dpbicpOwogICAgcmV0dXJuIChfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJmb250LXNhbnMgYW50aWFsaWFzZWQgdGV4dC1ncmF5LTkwMCIsIGNoaWxkcmVuOiBbdmlldyA9PT0gJ21lbnUnICYmIChfanN4KE1haW5NZW51LCB7IG9uU3RhcnQ6IGhhbmRsZVN0YXJ0LCBzZXR0aW5nczogc2V0dGluZ3MsIHNldFNldHRpbmdzOiBzZXRTZXR0aW5ncyB9KSksIHZpZXcgPT09ICdnYW1lJyAmJiAoX2pzeChHYW1lLCB7IHNldHRpbmdzOiBzZXR0aW5ncywgb25FeGl0OiBoYW5kbGVFeGl0LCBvbldpbjogaGFuZGxlV2luIH0pKSwgdmlldyA9PT0gJ3dpbicgJiYgKF9qc3goImRpdiIsIHsgY2xhc3NOYW1lOiAidy1mdWxsIGgtc2NyZWVuIGJnLWJsYWNrIGZsZXggZmxleC1jb2wgaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHRleHQtd2hpdGUgcC04IHRleHQtY2VudGVyIGFuaW1hdGUtZmFkZS1pbiIsIGNoaWxkcmVuOiBfanN4cygiZGl2IiwgeyBjbGFzc05hbWU6ICJtYXgtdy0yeGwiLCBjaGlsZHJlbjogW19qc3goImgxIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LTZ4bCBmb250LWNpbnplbCB0ZXh0LXllbGxvdy01MDAgbWItNiBkcm9wLXNoYWRvdy1bMF8wXzI1cHhfcmdiYSgyMzQsMTc5LDgsMC41KV0iLCBjaGlsZHJlbjogIlZJQ1RPUlkiIH0pLCBfanN4KCJwIiwgeyBjbGFzc05hbWU6ICJ0ZXh0LXhsIG9wYWNpdHktODAgbWItOCBsZWFkaW5nLXJlbGF4ZWQiLCBjaGlsZHJlbjogIllvdSBoYXZlIG5hdmlnYXRlZCB0aGUgdHJlYWNoZXJvdXMgZGVwdGhzIG9mIHRoZSBwcmludGluZyBwcmVzcywgZGVmZWF0ZWQgdGhlIGVkaXRvcnMgb2YgY2hhb3MsIGFuZCBkZWxpdmVyZWQgdGhlIHRydXRoIHRvIHRoZSBtYXNzZXMuIFRoZSBGbG91bmRlciBDaHJvbmljbGUgY29udGludWVzLiIgfSksIF9qc3goImJ1dHRvbiIsIHsgb25DbGljazogaGFuZGxlRXhpdCwgY2xhc3NOYW1lOiAicHgtOCBweS00IGJnLXdoaXRlIHRleHQtYmxhY2sgZm9udC1ib2xkIHRleHQtbGcgaG92ZXI6c2NhbGUtMTA1IHRyYW5zaXRpb24tdHJhbnNmb3JtIiwgY2hpbGRyZW46ICJSRVRVUk4gVE8gTUVOVSIgfSldIH0pIH0pKV0gfSkpOwp9CmV4cG9ydCBkZWZhdWx0IEFwcDsK","@/utils/audio":"data:application/javascript;base64,ZXhwb3J0IGNsYXNzIEF1ZGlvQ29udHJvbGxlciB7CiAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICB0aGlzLmN0eCA9IG51bGw7CiAgICAgICAgdGhpcy5tYXN0ZXJHYWluID0gbnVsbDsKICAgIH0KICAgIGluaXQoKSB7CiAgICAgICAgaWYgKHRoaXMuY3R4KQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgQXVkaW9Db250ZXh0Q2xhc3MgPSB3aW5kb3cuQXVkaW9Db250ZXh0IHx8IHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7CiAgICAgICAgICAgIHRoaXMuY3R4ID0gbmV3IEF1ZGlvQ29udGV4dENsYXNzKCk7CiAgICAgICAgICAgIHRoaXMubWFzdGVyR2FpbiA9IHRoaXMuY3R4LmNyZWF0ZUdhaW4oKTsKICAgICAgICAgICAgdGhpcy5tYXN0ZXJHYWluLmNvbm5lY3QodGhpcy5jdHguZGVzdGluYXRpb24pOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICBjb25zb2xlLndhcm4oJ0F1ZGlvQ29udGV4dCBub3Qgc3VwcG9ydGVkJywgZSk7CiAgICAgICAgfQogICAgfQogICAgc2V0Vm9sdW1lKHZvbHVtZSkgewogICAgICAgIGlmICh0aGlzLm1hc3RlckdhaW4pIHsKICAgICAgICAgICAgLy8gQ2xhbXAgdm9sdW1lIDAtMQogICAgICAgICAgICBjb25zdCB2ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdm9sdW1lKSk7CiAgICAgICAgICAgIHRoaXMubWFzdGVyR2Fpbi5nYWluLnNldFRhcmdldEF0VGltZSh2LCB0aGlzLmN0eD8uY3VycmVudFRpbWUgfHwgMCwgMC4xKTsKICAgICAgICB9CiAgICB9CiAgICBwbGF5SnVtcCgpIHsKICAgICAgICB0aGlzLnBsYXlUb25lKDE1MCwgJ3NpbmUnLCAwLjE1LCAzMDAsIDAuMyk7CiAgICB9CiAgICBwbGF5Q29sbGVjdCgpIHsKICAgICAgICB0aGlzLnBsYXlUb25lKDg4MCwgJ3NpbmUnLCAwLjEsIDE3NjAsIDAuMik7CiAgICB9CiAgICBwbGF5RGFtYWdlKCkgewogICAgICAgIHRoaXMucGxheVRvbmUoMTUwLCAnc2F3dG9vdGgnLCAwLjMsIDUwLCAwLjQpOwogICAgfQogICAgcGxheUVuZW15RGVhdGgoKSB7CiAgICAgICAgdGhpcy5wbGF5VG9uZSgyMDAsICdzcXVhcmUnLCAwLjE1LCA1MCwgMC4yKTsKICAgIH0KICAgIHBsYXlTaG9vdCgpIHsKICAgICAgICB0aGlzLnBsYXlUb25lKDQwMCwgJ3RyaWFuZ2xlJywgMC4xLCAxMDAsIDAuMik7CiAgICB9CiAgICBwbGF5U3RlcCgpIHsKICAgICAgICAvLyBWZXJ5IHN1YnRsZSBub2lzZSBmb3Igc3RlcHBpbmc/IE1heWJlIHNraXAgZm9yIG5vdyB0byBhdm9pZCBub2lzZQogICAgfQogICAgcGxheVRvbmUoZnJlcSwgdHlwZSwgZHVyYXRpb24sIGVuZEZyZXEsIHZvbCA9IDAuNSkgewogICAgICAgIGlmICghdGhpcy5jdHggfHwgIXRoaXMubWFzdGVyR2FpbikKICAgICAgICAgICAgdGhpcy5pbml0KCk7CiAgICAgICAgaWYgKCF0aGlzLmN0eCB8fCAhdGhpcy5tYXN0ZXJHYWluKQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgLy8gUmVzdW1lIGNvbnRleHQgaWYgc3VzcGVuZGVkIChjb21tb24gaW4gYnJvd3NlcnMpCiAgICAgICAgaWYgKHRoaXMuY3R4LnN0YXRlID09PSAnc3VzcGVuZGVkJykgewogICAgICAgICAgICB0aGlzLmN0eC5yZXN1bWUoKTsKICAgICAgICB9CiAgICAgICAgY29uc3Qgb3NjID0gdGhpcy5jdHguY3JlYXRlT3NjaWxsYXRvcigpOwogICAgICAgIGNvbnN0IGdhaW4gPSB0aGlzLmN0eC5jcmVhdGVHYWluKCk7CiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7CiAgICAgICAgZ2Fpbi5jb25uZWN0KHRoaXMubWFzdGVyR2Fpbik7CiAgICAgICAgb3NjLnR5cGUgPSB0eXBlOwogICAgICAgIG9zYy5mcmVxdWVuY3kuc2V0VmFsdWVBdFRpbWUoZnJlcSwgdGhpcy5jdHguY3VycmVudFRpbWUpOwogICAgICAgIGlmIChlbmRGcmVxKSB7CiAgICAgICAgICAgIG9zYy5mcmVxdWVuY3kuZXhwb25lbnRpYWxSYW1wVG9WYWx1ZUF0VGltZShlbmRGcmVxLCB0aGlzLmN0eC5jdXJyZW50VGltZSArIGR1cmF0aW9uKTsKICAgICAgICB9CiAgICAgICAgZ2Fpbi5nYWluLnNldFZhbHVlQXRUaW1lKHZvbCwgdGhpcy5jdHguY3VycmVudFRpbWUpOwogICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAxLCB0aGlzLmN0eC5jdXJyZW50VGltZSArIGR1cmF0aW9uKTsKICAgICAgICBvc2Muc3RhcnQoKTsKICAgICAgICBvc2Muc3RvcCh0aGlzLmN0eC5jdXJyZW50VGltZSArIGR1cmF0aW9uKTsKICAgIH0KfQpleHBvcnQgY29uc3QgYXVkaW9NYW5hZ2VyID0gbmV3IEF1ZGlvQ29udHJvbGxlcigpOwo="}}</script>
<script type="module">
  const geminiUrl = window.location.origin + '/api-proxy';

  window.API_KEY = 'UNUSED_PLACEHOLDER_FOR_API_KEY';
  window.GEMINI_API_KEY = 'UNUSED_PLACEHOLDER_FOR_API_KEY';
  window.process = window.process || {};
  window.process.env = window.process.env || {};
  window.process.env.API_KEY = window.API_KEY;
  window.process.env.GEMINI_API_KEY = window.GEMINI_API_KEY;
</script>

<!DOCTYPE html>
<html lang="en">

<div>
  <script src="/public/websocket-interceptor.js" defer></script>
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(registration => {
            console.log('Service Worker registered successfully with scope:', registration.scope);
          })
          .catch(error => {
            console.error('Service Worker registration failed:', error);
          });
      });
    } else {
      console.log('Service workers are not supported in this browser.');
    }
  </script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=600, height=400 ,initial-scale=1.0" />
  <title>The Flounder Chronicles</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lato:wght@300;400;700&display=swap');

    body {
      margin: 0;
      background-color: #050505;
      overflow: hidden;
      font-family: 'Lato', sans-serif;
    }

    canvas {
      display: block;
    }

    .font-cinzel {
      font-family: 'Cinzel', serif;
    }
  </style>
</div>

<div>
  <div id="root"></div>
</div>

</div>
<script type="module">import '@/index';</script>

